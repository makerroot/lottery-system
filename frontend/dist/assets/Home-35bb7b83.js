import{aS as T}from"./vendor-a94b8c86.js";import{r as y}from"./request-5e349af4.js";import{_ as V}from"./_plugin-vue_export-helper-c27b6911.js";import{o as N,j as L,U as A,V as l,_ as c,Z as s,$ as H,a0 as _,F as f,a1 as g,c as J,X as b,W as x,r as m,a2 as h,a3 as R,a4 as i}from"./vue-vendor-6562d100.js";import"./axios-78d57de0.js";import"./antd-vue-e1953b5a.js";import"./antd-icons-bbb5d9cb.js";import"./dayjs-793f537c.js";const W={class:"home-container"},j={class:"neon-background"},q={class:"home-content"},F={key:0,class:"loading-state"},P={key:1,class:"stats-section"},X={class:"stats-container"},Y={class:"stat-info"},Z={class:"stat-value font-display"},G={class:"stat-label font-body"},K={key:2,class:"companies-section"},Q={class:"companies-grid"},ss={class:"card-inner"},as={class:"company-icon"},ts={class:"company-name font-display"},es={class:"company-code font-mono"},ns={class:"company-stats"},os={class:"stat-item"},ls={class:"stat-value font-display"},is={class:"stat-item"},cs={class:"stat-value font-display"},ds={key:3,class:"recent-winners-section"},rs={class:"winners-list glass"},vs={class:"winner-avatar font-display"},us={class:"winner-details"},ms={class:"winner-name font-display"},ps={class:"winner-prize"},_s={class:"winner-company font-mono"},ys={class:"unified-access"},fs={__name:"Home",setup(gs){const D=T(),u=m(!1),d=m([]),r=m(null),p=m([]),k=m(null),w=m(!1),S=()=>{w.value=!!localStorage.getItem("admin_token")};D.afterEach(()=>{S()}),N(()=>{S()});const U=L(()=>r.value?[{icon:"ğŸ‘¥",iconClass:"icon-cyan",value:r.value.total_users||0,label:"æ€»ç”¨æˆ·æ•°"},{icon:"ğŸ†",iconClass:"icon-yellow",value:r.value.drawn_users||0,label:"ä¸­å¥–äººæ•°"},{icon:"ğŸ¢",iconClass:"icon-magenta",value:d.value.length,label:"æ´»è·ƒå…¬å¸"}]:[]),z=async()=>{try{const n=localStorage.getItem("admin_user"),a=localStorage.getItem("admin_token");if(n&&a){const e=JSON.parse(n);if(e.is_super_admin){const o=(await y.get("/admin/companies",{headers:{Authorization:`Bearer ${a}`}})).filter(v=>v.is_active);d.value=Array.from(new Map(o.map(v=>[v.id,v])).values())}else e.company?d.value=e.company.is_active?[e.company]:[]:d.value=[]}else d.value=[]}catch{d.value=[]}},B=async()=>{var n;try{const a=localStorage.getItem("admin_user"),e=localStorage.getItem("admin_token");if(a&&e){const t=JSON.parse(a),o=await y.get("/admin/stats",{params:{company_id:(n=t.company)==null?void 0:n.id}});r.value={total_users:o.total_users||0,drawn_users:o.drawn_users||0,total_records:o.total_records||0}}else r.value={total_users:0,drawn_users:0,total_records:0}}catch{r.value={total_users:0,drawn_users:0,total_records:0}}},E=async()=>{try{const n=localStorage.getItem("admin_user"),a=localStorage.getItem("admin_token");if(!n||!a){p.value=[];return}const e=JSON.parse(n);let t=null;e.company&&!e.is_super_admin&&(t=e.company.id);const o=await y.get("/admin/draw-records",{params:{company_id:t,page:1,page_size:5},headers:{Authorization:`Bearer ${a}`}});p.value=o.data||[]}catch{p.value=[]}},M=n=>{const a=["ğŸª","ğŸ­","ğŸ°","ğŸ²","ğŸ¯","ğŸ±"];return a[n%a.length]||"ğŸª"},O=()=>{const n=k.value;if(n)for(let a=0;a<30;a++){const e=document.createElement("div");e.className="particle",e.style.left=`${Math.random()*100}%`,e.style.top=`${Math.random()*100}%`,e.style.animationDelay=`${Math.random()*5}s`,e.style.animationDuration=`${5+Math.random()*10}s`,n.appendChild(e)}};return N(async()=>{u.value=!0;try{await Promise.all([z(),B(),E()]),O()}finally{u.value=!1}}),(n,a)=>{const e=A("router-link");return l(),c("div",W,[s("div",j,[a[0]||(a[0]=s("div",{class:"gradient-orb orb-1"},null,-1)),a[1]||(a[1]=s("div",{class:"gradient-orb orb-2"},null,-1)),a[2]||(a[2]=s("div",{class:"gradient-orb orb-3"},null,-1)),s("div",{class:"particles",ref_key:"particles",ref:k},null,512),a[3]||(a[3]=s("div",{class:"grid-overlay"},null,-1))]),s("div",q,[a[14]||(a[14]=H('<div class="top-decoration" data-v-2e8b0c35><div class="deco-line line-left" data-v-2e8b0c35></div><div class="deco-dot" data-v-2e8b0c35></div><div class="deco-line line-right" data-v-2e8b0c35></div></div><div class="title-section" data-v-2e8b0c35><div class="title-wrapper" data-v-2e8b0c35><h1 class="main-title font-display" data-v-2e8b0c35><span class="title-line" data-v-2e8b0c35>NEON</span><span class="title-line title-accent" data-v-2e8b0c35>LOTTERY</span></h1><div class="title-underline" data-v-2e8b0c35></div></div><p class="subtitle font-body" data-v-2e8b0c35>ğŸ° éœ“è™¹å˜‰å¹´å Â· å¹¸è¿å¤§æŠ½å¥– ğŸ°</p><p class="description font-body" data-v-2e8b0c35>é€‰æ‹©æ‚¨çš„å…¬å¸ï¼Œå¼€å¯å¹¸è¿ä¹‹æ—…</p></div>',2)),u.value?(l(),c("div",F,[...a[4]||(a[4]=[s("div",{class:"neon-spinner"},null,-1),s("p",{class:"font-body"},"æ­£åœ¨åŠ è½½...",-1)])])):_("",!0),!u.value&&r.value?(l(),c("div",P,[s("div",X,[(l(!0),c(f,null,g(U.value,(t,o)=>(l(),c("div",{key:o,class:"stat-card glass",style:h({animationDelay:`${o*.1}s`})},[s("div",{class:R(["stat-icon",t.iconClass])},i(t.icon),3),s("div",Y,[s("div",Z,i(t.value),1),s("div",G,i(t.label),1)])],4))),128))])])):_("",!0),!u.value&&d.value.length>0?(l(),c("div",K,[a[10]||(a[10]=s("div",{class:"section-header"},[s("h2",{class:"section-title font-display"},"å‚ä¸å…¬å¸"),s("div",{class:"title-line-accent"})],-1)),s("div",Q,[(l(!0),c(f,null,g(d.value,(t,o)=>(l(),x(e,{key:t.id,to:`/lottery?company=${t.code}`,class:"company-card glass neon-border-flow",style:h({animationDelay:`${o*.1}s`})},{default:b(()=>[s("div",ss,[s("div",as,i(M(t.id)),1),s("h3",ts,i(t.name),1),s("p",es,"@"+i(t.code),1),s("div",ns,[s("div",os,[s("span",ls,i(t.total_users||0),1),a[5]||(a[5]=s("span",{class:"stat-label"},"ç”¨æˆ·",-1))]),a[7]||(a[7]=s("div",{class:"stat-divider"},null,-1)),s("div",is,[s("span",cs,i(t.drawn_count||0),1),a[6]||(a[6]=s("span",{class:"stat-label"},"ä¸­å¥–",-1))])]),a[8]||(a[8]=s("div",{class:"company-action"},[s("span",{class:"action-text font-display"},"è¿›å…¥æŠ½å¥–"),s("span",{class:"action-arrow"},"â†’")],-1))]),a[9]||(a[9]=s("div",{class:"card-glow"},null,-1))]),_:2},1032,["to","style"]))),128))])])):_("",!0),!u.value&&p.value.length>0?(l(),c("div",ds,[a[11]||(a[11]=s("div",{class:"section-header"},[s("h2",{class:"section-title font-display"},"æœ€è¿‘ä¸­å¥–"),s("div",{class:"title-line-accent"})],-1)),s("div",rs,[(l(!0),c(f,null,g(p.value,(t,o)=>{var v,C,I,$;return l(),c("div",{key:t.id,class:"winner-item",style:h({animationDelay:`${o*.08}s`})},[s("div",vs,i((((v=t.user)==null?void 0:v.name)||"æœªçŸ¥")[0]),1),s("div",us,[s("span",ms,i(((C=t.user)==null?void 0:C.name)||"æœªçŸ¥"),1),s("span",ps,i(((I=t.level)==null?void 0:I.name)||""),1)]),s("div",_s,i((($=t.company)==null?void 0:$.name)||""),1)],4)}),128))])])):_("",!0),s("div",ys,[J(e,{to:"/lottery",class:"access-link glass lottery-cta"},{default:b(()=>[...a[12]||(a[12]=[s("div",{class:"access-icon"},"ğŸ²",-1),s("div",{class:"access-text"},[s("h3",{class:"font-display"},"å‚ä¸æŠ½å¥–"),s("p",{class:"font-body"},"ç»Ÿä¸€ç™»å½• Â· ç”¨æˆ·å’Œç®¡ç†å‘˜éƒ½å¯å‚ä¸")],-1),s("div",{class:"access-arrow font-display"},"â†’",-1),s("div",{class:"link-glow"},null,-1),s("div",{class:"pulse-ring"},null,-1)])]),_:1}),w.value?(l(),x(e,{key:0,to:"/admin/dashboard",class:"access-link glass admin-cta"},{default:b(()=>[...a[13]||(a[13]=[s("div",{class:"access-icon"},"ğŸ›ï¸",-1),s("div",{class:"access-text"},[s("h3",{class:"font-display"},"ç®¡ç†åå°"),s("p",{class:"font-body"},"ç³»ç»Ÿç®¡ç†æ§åˆ¶å°")],-1),s("div",{class:"access-arrow font-display"},"â†’",-1),s("div",{class:"link-glow"},null,-1)])]),_:1})):_("",!0)]),a[15]||(a[15]=s("div",{class:"bottom-decoration"},[s("div",{class:"deco-line line-left"}),s("div",{class:"deco-dot"}),s("div",{class:"deco-line line-right"})],-1))])])}}},Ns=V(fs,[["__scopeId","data-v-2e8b0c35"]]);export{Ns as default};
