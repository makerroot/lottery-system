import{j as k,r as n,w as ds,o as vs,f as ps,U,V as u,_ as c,u as B,Z as s,c as p,X as m,F as G,a4 as r,G as I,W as Ne,a0 as b,$ as ms,a1 as ae,a3 as de,a2 as Ue,a5 as Ve}from"./vue-vendor-6562d100.js";import{aS as fs,aR as ys}from"./vendor-af4d91ab.js";import{a as D}from"./api-18050e56.js";import{r as gs}from"./request-57094e38.js";import{_ as _s}from"./_plugin-vue_export-helper-c27b6911.js";import{a2 as ws}from"./antd-icons-16470984.js";import{m as d}from"./antd-vue-821a3ecc.js";import"./axios-78d57de0.js";import"./dayjs-793f537c.js";const R=n(null),Ie=n(null),Re=n(!1),S={id:1,code:"DEFAULT",name:"é»˜è®¤å…¬å¸",logo:"",theme_color:"#00fff5",bg_color:"#0a0f14",title:"ğŸ‰ å¹¸è¿å¤§æŠ½å¥–",subtitle:"Luck Lottery System",welcome_text:"æ¬¢è¿å‚ä¸æŠ½å¥–æ´»åŠ¨ï¼",rules_text:"æ¯äººåªèƒ½æŠ½ä¸€æ¬¡ï¼Œç¥æ‚¨å¥½è¿ï¼",draw_button_text:"ç‚¹å‡»æŠ½å¥–",success_text:"æ­å–œæ‚¨è·å¾—",contact_name:"ç®¡ç†å‘˜",contact_phone:"400-888-8888",contact_email:"admin@example.com"};async function We(h){if(!h){let l=null;if(window.location.hash.includes("?")){const z=window.location.hash.split("?");z.length>1&&(l=new URLSearchParams(z[1]).get("company"))}!l&&window.location.search&&(l=new URLSearchParams(window.location.search).get("company")),h=l||"DEFAULT"}Ie.value=h,Re.value=!0;try{const l=await D.get("/api/company",{params:{code:h}});return R.value=l,l}catch{return R.value=S,S}finally{Re.value=!1}}function bs(){const h=l=>{Ie.value=l};return{companyConfig:k(()=>R.value||S),companyCode:k(()=>Ie.value||"DEFAULT"),setCompanyCode:h,isLoading:k(()=>Re.value),themeColor:k(()=>{var l;return((l=R.value)==null?void 0:l.theme_color)||S.theme_color}),bgColor:k(()=>{var l;return((l=R.value)==null?void 0:l.bg_color)||S.bg_color}),title:k(()=>{var l;return((l=R.value)==null?void 0:l.title)||S.title}),subtitle:k(()=>{var l;return((l=R.value)==null?void 0:l.subtitle)||S.subtitle}),welcomeText:k(()=>{var l;return((l=R.value)==null?void 0:l.welcome_text)||S.welcome_text}),rulesText:k(()=>{var l;return((l=R.value)==null?void 0:l.rules_text)||S.rules_text}),drawButtonText:k(()=>{var l;return((l=R.value)==null?void 0:l.draw_button_text)||S.draw_button_text}),successText:k(()=>{var l;return((l=R.value)==null?void 0:l.success_text)||S.successText})}}function hs(){const h=n(localStorage.getItem("lottery_user")),l=n(!!h.value),z=n({}),E=()=>{if(!h.value){z.value={};return}try{z.value=JSON.parse(h.value)}catch{z.value={}}},F=()=>{h.value=localStorage.getItem("lottery_user"),l.value=!!h.value,E()};F();const ve=y=>{if(y.token){localStorage.setItem("lottery_token",y.token);const M=y.user||y;localStorage.setItem("lottery_user",JSON.stringify(M))}else localStorage.setItem("lottery_user",JSON.stringify(y));F()},pe=()=>{localStorage.removeItem("lottery_user"),localStorage.removeItem("lottery_token"),F()};return window.addEventListener("storage",y=>{(y.key==="lottery_user"||y.key===null)&&F()}),{userLoggedIn:l,currentUser:z,setUser:ve,clearUser:pe,checkLoginStatus:F}}const ks={key:0,class:"user-login-overlay"},xs={class:"login-container glass"},Cs=["disabled"],Ps={key:0,class:"button-spinner"},Ss={class:"neon-background"},Ls={class:"top-status-bar glass"},Us={class:"status-bar-content"},Is={class:"status-item"},Rs={class:"status-icon"},zs={class:"status-label font-body"},$s={class:"status-item"},Ts={class:"status-value font-display"},qs={class:"status-item"},As={class:"status-value font-display"},Ds={style:{"text-align":"center",padding:"20px 0"}},Ms={key:0,style:{padding:"40px 0"}},Es={key:1},Fs=["src"],Ns={class:"top-status-bar glass"},Vs={class:"status-bar-content"},Ws={class:"status-item"},Bs={class:"status-value font-display"},Qs={class:"status-item"},Os={class:"status-value font-display"},Js={class:"lottery-content"},Ks={class:"stage-area"},js={class:"lottery-display"},Gs={class:"display-container glass neon-border-flow mega-display"},Xs={key:0,class:"drawing-animation"},Zs=["data-index"],Hs={class:"user-name font-display"},Ys={class:"user-phone font-mono"},et={key:1,class:"highlight-frame"},st={key:2,class:"waiting-overlay"},tt={key:3,class:"drawing-overlay"},ot={key:1,class:"result-showcase"},at={class:"result-title font-display"},lt={class:"winners-list"},nt={class:"winner-avatar font-display"},rt={class:"winner-info"},it={class:"winner-name font-display"},ut={class:"winner-phone font-mono"},ct={class:"winner-prize"},dt={class:"prize-level"},vt={class:"prize-name"},pt={key:0,class:"controls-area"},mt={class:"config-card glass control-panel"},ft={class:"config-form"},yt={class:"qr-section"},gt={class:"form-group"},_t={class:"level-option"},wt={class:"level-main"},bt={class:"level-name font-display"},ht={class:"level-stock"},kt={class:"stock-text"},xt={key:0,class:"form-error"},Ct={class:"form-group"},Pt={class:"count-selector"},St={class:"quick-counts"},Lt=["onClick","disabled"],Ut={class:"form-tip font-body"},It={class:"draw-actions"},Rt=["disabled"],zt={key:0,class:"button-spinner"},$t={key:1,class:"controls-area"},Tt={class:"config-card glass control-panel user-info-panel"},qt={class:"user-info-content"},At={class:"info-item"},Dt={class:"info-details"},Mt={class:"info-value font-display"},Et={class:"info-item"},Ft={class:"info-details"},Nt={class:"info-value font-display"},Vt={class:"info-item"},Wt={class:"info-details"},Bt={class:"info-value font-display"},Qt={key:2,class:"timeline-area"},Ot={class:"timeline-header"},Jt={class:"timeline-controls"},Kt={class:"timeline-avatar font-display"},jt={class:"timeline-info"},Gt={class:"timeline-name font-display"},Xt={class:"timeline-phone font-mono"},Zt={class:"timeline-prize"},Ht={class:"timeline-level"},Yt={class:"timeline-prize-name"},eo=10,so=16,to=30,oo=100,ao={__name:"Lottery",setup(h){const l=fs(),z=ys(),{userLoggedIn:E,currentUser:F,setUser:ve,clearUser:pe}=hs(),y=n(!!localStorage.getItem("admin_token")),M=n(null),$=n("guest"),x=n({username:"",password:""}),X=n(!1),Z=n(!1),me=n(!1),g=n({oldPassword:"",newPassword:"",confirmPassword:""}),Be=async(t,e)=>e!==g.value.newPassword?Promise.reject("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"):Promise.resolve(),Qe=()=>{g.value={oldPassword:"",newPassword:"",confirmPassword:""},Z.value=!0},Oe=async()=>{var t,e;if(g.value.oldPassword&&g.value.newPassword&&!(g.value.newPassword.length<6)&&g.value.newPassword===g.value.confirmPassword){me.value=!0;try{$.value==="user"?await D.post("/api/user/change-password",{old_password:g.value.oldPassword,new_password:g.value.newPassword}):await gs.post("/admin/change-password",{old_password:g.value.oldPassword,new_password:g.value.newPassword}),d.success("å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»å½•"),Z.value=!1,setTimeout(()=>{ze()},1e3),d.error(((e=(t=error.response)==null?void 0:t.data)==null?void 0:e.error)||"ä¿®æ”¹å¯†ç å¤±è´¥ï¼Œè¯·æ£€æŸ¥å½“å‰å¯†ç æ˜¯å¦æ­£ç¡®")}finally{me.value=!1}}},fe=async()=>{if(x.value.username&&x.value.password&&!(x.value.password.length<6)){X.value=!0;try{let t=l.query.company||i.value||"default";console.log("ç™»å½•æ—¶ä½¿ç”¨çš„å…¬å¸ä»£ç :",t);const e=await D.post("/api/login",{username:x.value.username,password:x.value.password},{params:{company_code:t}});e.user_type==="user"?(ve({user:e.user,token:e.token}),E.value=!0,$.value="user",d.success("ç™»å½•æˆåŠŸï¼"),e.user.company&&(i.value=e.user.company.code,H(e.user.company.code))):(localStorage.setItem("admin_token",e.token),localStorage.setItem("admin_user",JSON.stringify(e.user)),y.value=!0,M.value=e.user,$.value=e.user_type,e.user_type==="super_admin"?d.success("ğŸ‘‘ è¶…çº§ç®¡ç†å‘˜ç™»å½•æˆåŠŸï¼"):d.success("ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ç™»å½•æˆåŠŸï¼"),e.user.company&&(i.value=e.user.company.code,H(e.user.company.code))),await We(i.value),await He(),error.response&&error.response.status===401?d.error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"):d.error("ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{X.value=!1}}},ze=()=>{y.value?(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),y.value=!1,M.value=null):pe(),$.value="guest",d.info("å·²é€€å‡ºç™»å½•"),z.push("/")},$e=n(null),Je=n(null),ye=n(null),le=n(null),Te=n(null),i=n(""),{companyCode:lo,setCompanyCode:H,themeColor:ge,title:no,subtitle:ro,drawButtonText:io,successText:Ke}=bs(),ne=n([]),K=n({}),Q=n([]),re=n([]),_=n(!1),j=n(!1),T=n([]),ie=n(!1),je=n(!1),Ge=n(!1),Xe=n(!1),ue=n(!1),_e=n(""),Ze=()=>{Y.value||!le.value||(Y.value=setInterval(()=>{const t=le.value;t&&t.scrollBy({left:eo,behavior:"auto"})},so))},qe=()=>{Y.value&&(clearInterval(Y.value),Y.value=null)},C=n(null),P=n(1),Y=n(null),O=n(!0),ee=n(null),we=k(()=>ne.value.filter(t=>t.is_active&&t.total_stock-t.used_stock>0)),be=k(()=>{if(!C.value)return 1;const t=ne.value.find(e=>e.id===C.value);return t?t.total_stock-t.used_stock:1}),Ae=async()=>{await We(),De()},De=()=>{const t=ge.value||"#00fff5",e=(f,w)=>{const L=parseInt(f.slice(1,3),16),N=parseInt(f.slice(3,5),16),J=parseInt(f.slice(5,7),16);return`rgba(${L}, ${N}, ${J}, ${w})`},a=document.documentElement;a.style.setProperty("--company-color",t);const v=getComputedStyle(a).getPropertyValue("--bg-secondary").trim()||"#141420";a.style.setProperty("--company-color-bg",v),a.style.setProperty("--company-color-03",e(t,.03)),a.style.setProperty("--company-color-10",e(t,.1)),a.style.setProperty("--company-color-15",e(t,.15)),a.style.setProperty("--company-color-20",e(t,.2)),a.style.setProperty("--company-color-30",e(t,.3)),a.style.setProperty("--company-color-40",e(t,.4)),a.style.setProperty("--company-color-50",e(t,.5)),a.style.setProperty("--company-color-60",e(t,.6))};ds(ge,()=>{De()},{immediate:!0});const he=async()=>{try{if(!i.value)return;const t=await D.get(`/api/prize-levels?company_code=${i.value}`);ne.value=t}catch{d.error("è·å–å¥–é¡¹åˆ—è¡¨å¤±è´¥")}},ke=async()=>{try{if(!i.value)return;const t=await D.get(`/api/user-stats?company_code=${i.value}`);K.value=t}catch{d.error("è·å–ç”¨æˆ·ç»Ÿè®¡å¤±è´¥")}},xe=async()=>{try{if(!i.value)return;const t=await D.get(`/api/draw-records?company_code=${i.value}`);Q.value=t||[]}catch{d.error("è·å–ä¸­å¥–è®°å½•å¤±è´¥")}},He=async()=>{try{await Promise.all([he(),ke(),xe()])}catch(t){console.error("åŠ è½½æ•°æ®å¤±è´¥:",t)}},Ye=async()=>{var t,e,a,v;try{if(console.log("å¼€å§‹è·å–äºŒç»´ç ï¼Œcompany_code:",i.value),!i.value){d.error("å…¬å¸ä»£ç ä¸ºç©ºï¼Œæ— æ³•è·å–äºŒç»´ç "),console.error("currentCompanyCode ä¸ºç©º");return}const f=`/api/qr-register?company_code=${i.value}`;console.log("API URL:",f);const w=await D.get(f);console.log("è·å–åˆ°äºŒç»´ç æ•°æ®:",w?"æˆåŠŸ":"å¤±è´¥"),console.log("äºŒç»´ç é•¿åº¦:",((t=w==null?void 0:w.qr_code)==null?void 0:t.length)||0),w&&w.qr_code?(_e.value=w.qr_code,console.log("äºŒç»´ç å·²è®¾ç½®åˆ° registerQRCode")):(d.error("äºŒç»´ç æ•°æ®æ ¼å¼é”™è¯¯"),console.error("è¿”å›æ•°æ®ç¼ºå°‘ qr_code å­—æ®µ:",w))}catch(f){console.error("è·å–æ³¨å†ŒäºŒç»´ç å¤±è´¥:",f),console.error("é”™è¯¯è¯¦æƒ…:",((e=f.response)==null?void 0:e.data)||f.message),d.error(`è·å–äºŒç»´ç å¤±è´¥: ${((v=(a=f.response)==null?void 0:a.data)==null?void 0:v.error)||f.message}`)}},es=()=>{console.log("=== showQRModal è¢«è°ƒç”¨ ==="),console.log("å½“å‰ company_code:",i.value),console.log("qrModalVisible è®¾ç½®ä¸º:",ue.value),ue.value=!0,console.log("å‡†å¤‡è°ƒç”¨ fetchRegisterQRCode"),Ye(),console.log("=== showQRModal æ‰§è¡Œå®Œæ¯• ===")},Me=async()=>{try{if(!i.value)return;const t=await D.get(`/api/available-users?company_code=${i.value}`);if(!t||t.length===0){const e=[],a=[{name:"å¼ ä¸‰",phone:"138****0001"},{name:"æå››",phone:"138****0002"},{name:"ç‹äº”",phone:"138****0003"},{name:"èµµå…­",phone:"138****0004"},{name:"é’±ä¸ƒ",phone:"138****0005"},{name:"å­™å…«",phone:"138****0006"},{name:"å‘¨ä¹",phone:"138****0007"}];for(let v=0;v<50;v++)e.push(...a);T.value=e}else{const e=[],a=Math.max(50,Math.ceil(350/t.length));for(let v=0;v<a;v++)e.push(...t);T.value=e}}catch(t){console.error("è·å–ç”¨æˆ·åˆ—è¡¨å¤±è´¥:",t);const e=[],a=[{name:"å¼ ä¸‰",phone:"138****0001"},{name:"æå››",phone:"138****0002"},{name:"ç‹äº”",phone:"138****0003"},{name:"èµµå…­",phone:"138****0004"},{name:"é’±ä¸ƒ",phone:"138****0005"},{name:"å­™å…«",phone:"138****0006"},{name:"å‘¨ä¹",phone:"138****0007"}];for(let v=0;v<50;v++)e.push(...a);T.value=e}},ss=()=>{const t=$e.value;if(t)for(let e=0;e<20;e++){const a=document.createElement("div");a.className="particle",a.style.left=`${Math.random()*100}%`,a.style.top=`${Math.random()*100}%`,a.style.animationDelay=`${Math.random()*5}s`,a.style.animationDuration=`${5+Math.random()*10}s`,t.appendChild(a)}},ts=async()=>{if(!C.value){ie.value=!0;return}if(!P.value||P.value<=0)return;if(await Me(),!T.value||T.value.length===0){d.error("ç”¨æˆ·åˆ—è¡¨ä¸ºç©ºï¼Œæ— æ³•å¼€å§‹æŠ½å¥–");return}const t=ne.value.find(a=>a.id===C.value);if(!t){d.error("å¥–é¡¹ä¸å­˜åœ¨");return}if(!(t.total_stock-t.used_stock<P.value)){try{if(!i.value)return;const a=await D.get(`/api/user-stats?company_code=${i.value}`);if(!a.undrawn_users||a.undrawn_users===0){d.warning("æ‰€æœ‰ç”¨æˆ·éƒ½å·²æŠ½è¿‡å¥–");return}if(a.undrawn_users<P.value){d.warning(`æœªæŠ½å¥–ç”¨æˆ·ä¸è¶³${P.value}äººï¼Œå½“å‰åªæœ‰${a.undrawn_users}äºº`);return}}catch(a){console.error("æ£€æŸ¥ç”¨æˆ·çŠ¶æ€å¤±è´¥:",a),d.error("æ— æ³•æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ï¼Œè¯·ç¨åé‡è¯•");return}_.value=!0,setTimeout(()=>{Ze()},100)}},os=async()=>{var J,ce;qe();const t=le.value,e=Te.value;if(!t||!e){d.error("æ— æ³•è·å–æ»šåŠ¨ä½ç½®"),_.value=!1;return}if(!T.value||T.value.length===0){d.error("ç”¨æˆ·æ•°æ®ä¸ºç©ºï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"),_.value=!1;return}const a=t.scrollLeft,v=t.clientWidth,f=a+v/2,w=e.querySelectorAll(".user-item");if(w.length===0){d.error("æœªæ‰¾åˆ°ç”¨æˆ·å…ƒç´ ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"),_.value=!1;return}let L=null,N=1/0;if(w.forEach((q,V)=>{const Le=q.offsetLeft,o=q.clientWidth,A=Le+o/2,W=Math.abs(f-A);W<N&&(N=W,V<T.value.length&&(L=T.value[V]))}),!L){d.error("æ— æ³•ç¡®å®šä¸­å¥–ç”¨æˆ·"),_.value=!1;return}try{if(!i.value){d.error("å…¬å¸ä¿¡æ¯å¼‚å¸¸ï¼Œè¯·é‡æ–°ç™»å½•"),_.value=!1;return}const q={level_id:C.value,count:P.value};L.phone&&!L.phone.includes("****")&&(q.user_phone=L.phone);const V=await D.post(`/api/draw?company_code=${i.value}`,q);re.value=Array.isArray(V)?V:[V],j.value=!0,await ke(),await xe(),await he(),_.value=!1,d.success(`ğŸ‰ æˆåŠŸæŠ½å–${re.value.length}ä½ä¸­å¥–è€…ï¼`),je.value=!1,Ge.value=!1,Xe.value=!1}catch(q){console.error("æŠ½å¥–å¤±è´¥:",q),d.error(((ce=(J=q.response)==null?void 0:J.data)==null?void 0:ce.error)||"æŠ½å¥–å¤±è´¥"),_.value=!1}},as=()=>{j.value=!1,re.value=[],C.value=null,P.value=1,ie.value=!1},Ce=t=>!t||t.length<7?t:t.substring(0,3)+"****"+t.substring(7),ls=t=>t.includes("ä¸€ç­‰")?"ä¸€ç­‰å¥–":t.includes("äºŒç­‰")?"äºŒç­‰å¥–":t.includes("ä¸‰ç­‰")?"ä¸‰ç­‰å¥–":t.includes("å‚ä¸")?"å‚ä¸å¥–":"å¹¸è¿å¥–",ns=t=>t.includes("ä¸€ç­‰")?"#f50":t.includes("äºŒç­‰")?"#fa8c16":t.includes("ä¸‰ç­‰")?"#52c41a":t.includes("å‚ä¸")?"#108ee9":"#722ed1",rs=t=>{const a=(t.total_stock-t.used_stock)/t.total_stock*100;return a===0?"#ff4d4f":a<20?"#faad14":a<50?"#1890ff":"#52c41a"},Ee=async()=>{(l.path==="/lottery"||l.path.startsWith("/lottery?"))&&await Ae()},Pe=()=>{ee.value||!ye.value||(ee.value=setInterval(()=>{const t=ye.value;if(!t)return;const e=t.scrollLeft,a=t.scrollWidth-t.clientWidth;e>=a-1?t.scrollTo({left:0,behavior:"auto"}):t.scrollBy({left:to,behavior:"smooth"})},oo))},Se=()=>{ee.value&&(clearInterval(ee.value),ee.value=null)},is=()=>{O.value?(Se(),O.value=!1):(Pe(),O.value=!0)},us=()=>{O.value&&Se()},cs=()=>{O.value&&Pe()};return vs(async()=>{const t=l.query.company;t&&!i.value&&(i.value=t,H(t),console.log("ä»è·¯ç”±è®¾ç½®å…¬å¸ä»£ç :",i.value));const e=localStorage.getItem("admin_token"),a=localStorage.getItem("admin_user");if(e&&a)try{M.value=JSON.parse(a),y.value=!0,M.value.company&&M.value.company.code&&(i.value=M.value.company.code,H(M.value.company.code),console.log("ä»ç®¡ç†å‘˜ä¿¡æ¯è®¾ç½®å…¬å¸ä»£ç :",i.value))}catch(v){console.error("è§£æç®¡ç†å‘˜ä¿¡æ¯å¤±è´¥:",v),localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")}i.value||(i.value="DEFAULT",H("DEFAULT"),console.log("ä½¿ç”¨é»˜è®¤å…¬å¸ä»£ç :",i.value)),E.value||y.value?(console.log("å¼€å§‹åŠ è½½æ•°æ®ï¼Œå…¬å¸ä»£ç :",i.value),await Ae(),await he(),await ke(),await xe()):companyConfig.value=S,ss(),we.value.length>0&&(C.value=we.value[0].id),window.addEventListener("focus",Ee),await Me(),Q.value.length>0&&setTimeout(()=>{Pe()},100)}),ps(()=>{window.removeEventListener("focus",Ee),Se(),qe()}),(t,e)=>{const a=U("a-input"),v=U("a-form-item"),f=U("a-input-password"),w=U("a-form"),L=U("a-tag"),N=U("a-button"),J=U("a-modal"),ce=U("a-spin"),q=U("a-select-option"),V=U("a-select"),Le=U("a-input-number");return u(),c("div",{class:"lottery-page",style:Ue({"--company-color":B(ge)})},[!B(E)&&!y.value?(u(),c("div",ks,[s("div",xs,[e[13]||(e[13]=s("div",{class:"login-header"},[s("div",{class:"login-icon"},"ğŸ°"),s("h1",{class:"login-title font-display"},"å¹¸è¿æŠ½å¥–"),s("p",{class:"login-subtitle font-body"},"è¯·ç™»å½•åå¼€å§‹æŠ½å¥–")],-1)),p(w,{layout:"vertical",class:"login-form"},{default:m(()=>[p(v,{label:"ç”¨æˆ·å"},{default:m(()=>[p(a,{value:x.value.username,"onUpdate:value":e[0]||(e[0]=o=>x.value.username=o),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",size:"large",onKeyup:Ve(fe,["enter"])},{prefix:m(()=>[...e[11]||(e[11]=[s("span",null,"ğŸ‘¤",-1)])]),_:1},8,["value"])]),_:1}),p(v,{label:"å¯†ç "},{default:m(()=>[p(f,{value:x.value.password,"onUpdate:value":e[1]||(e[1]=o=>x.value.password=o),placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰",size:"large",onKeyup:Ve(fe,["enter"])},{prefix:m(()=>[...e[12]||(e[12]=[s("span",null,"ğŸ”‘",-1)])]),_:1},8,["value"])]),_:1}),p(v,null,{default:m(()=>[s("button",{type:"button",onClick:fe,class:de(["login-button font-display",{loading:X.value}]),disabled:!x.value.username||!x.value.password||x.value.password.length<6},[X.value?(u(),c("span",Ps)):b("",!0),s("span",null,r(X.value?"ç™»å½•ä¸­...":"ğŸš€ ç™»å½•"),1)],10,Cs)]),_:1})]),_:1}),e[14]||(e[14]=s("div",{class:"login-tips"},[s("p",{class:"tip-text font-body"},"ğŸ’¡ æ²¡æœ‰è´¦å·è¯·è”ç³»ç®¡ç†å‘˜åˆ›å»º")],-1))])])):(u(),c(G,{key:1},[s("div",Ss,[e[15]||(e[15]=s("div",{class:"gradient-orb orb-cyan"},null,-1)),e[16]||(e[16]=s("div",{class:"gradient-orb orb-magenta"},null,-1)),e[17]||(e[17]=s("div",{class:"grid-overlay"},null,-1)),s("div",{class:"particles",ref_key:"particlesRef",ref:$e},null,512)]),s("div",Ls,[s("div",Us,[s("div",Is,[s("span",Rs,r($.value==="super_admin"?"ğŸ‘‘":$.value==="admin"?"ğŸ‘¨â€ğŸ’¼":"ğŸ‘¤"),1),s("span",zs,[I(r(B(F).name||B(F).username)+" ",1),$.value!=="user"&&$.value!=="guest"?(u(),Ne(L,{key:0,color:$.value==="super_admin"?"gold":"cyan",style:{"margin-left":"8px"}},{default:m(()=>[I(r($.value==="super_admin"?"è¶…çº§ç®¡ç†å‘˜":"ç®¡ç†å‘˜"),1)]),_:1},8,["color"])):b("",!0)])]),e[24]||(e[24]=s("div",{class:"status-divider"},null,-1)),s("div",$s,[e[18]||(e[18]=s("span",{class:"status-icon"},"ğŸ†",-1)),e[19]||(e[19]=s("span",{class:"status-label font-body"},"æœ¬åœºä¸­å¥–",-1)),s("span",Ts,r(Q.value.length),1)]),e[25]||(e[25]=s("div",{class:"status-divider"},null,-1)),s("div",qs,[e[20]||(e[20]=s("span",{class:"status-icon"},"ğŸ‘¥",-1)),e[21]||(e[21]=s("span",{class:"status-label font-body"},"å‚ä¸äººæ•°",-1)),s("span",As,r(K.value.total_users||0),1)]),e[26]||(e[26]=s("div",{class:"status-divider"},null,-1)),s("div",{class:"status-item",onClick:Qe,style:{cursor:"pointer"}},[...e[22]||(e[22]=[s("span",{class:"status-icon"},"ğŸ”",-1),s("span",{class:"status-label font-body"},"ä¿®æ”¹å¯†ç ",-1)])]),e[27]||(e[27]=s("div",{class:"status-divider"},null,-1)),s("div",{class:"status-item logout-action",onClick:ze},[...e[23]||(e[23]=[s("span",{class:"status-icon"},"ğŸšª",-1),s("span",{class:"status-label font-body"},"é€€å‡º",-1)])])])]),p(J,{open:Z.value,"onUpdate:open":e[6]||(e[6]=o=>Z.value=o),title:"ä¿®æ”¹å¯†ç ",footer:null,width:"400px"},{default:m(()=>[p(w,{model:g.value,layout:"vertical",onFinish:Oe},{default:m(()=>[p(v,{label:"å½“å‰å¯†ç ",name:"oldPassword",rules:[{required:!0,message:"è¯·è¾“å…¥å½“å‰å¯†ç "}]},{default:m(()=>[p(f,{value:g.value.oldPassword,"onUpdate:value":e[2]||(e[2]=o=>g.value.oldPassword=o),placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",size:"large"},null,8,["value"])]),_:1}),p(v,{label:"æ–°å¯†ç ",name:"newPassword",rules:[{required:!0,message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,message:"å¯†ç é•¿åº¦è‡³å°‘6ä½"}]},{default:m(()=>[p(f,{value:g.value.newPassword,"onUpdate:value":e[3]||(e[3]=o=>g.value.newPassword=o),placeholder:"è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰",size:"large"},null,8,["value"])]),_:1}),p(v,{label:"ç¡®è®¤å¯†ç ",name:"confirmPassword",rules:[{required:!0,message:"è¯·ç¡®è®¤æ–°å¯†ç "},{validator:Be}]},{default:m(()=>[p(f,{value:g.value.confirmPassword,"onUpdate:value":e[4]||(e[4]=o=>g.value.confirmPassword=o),placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",size:"large"},null,8,["value"])]),_:1},8,["rules"]),p(v,null,{default:m(()=>[p(N,{type:"primary","html-type":"submit",loading:me.value,block:"",size:"large"},{default:m(()=>[...e[28]||(e[28]=[I(" ç¡®è®¤ä¿®æ”¹ ",-1)])]),_:1},8,["loading"]),p(N,{style:{"margin-top":"8px"},block:"",size:"large",onClick:e[5]||(e[5]=o=>Z.value=!1)},{default:m(()=>[...e[29]||(e[29]=[I(" å–æ¶ˆ ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),p(J,{open:ue.value,"onUpdate:open":e[7]||(e[7]=o=>ue.value=o),title:"æ‰«ç å‚ä¸æŠ½å¥–",footer:null,width:"400px"},{default:m(()=>[s("div",Ds,[_e.value?(u(),c("div",Es,[s("img",{src:_e.value,alt:"æ³¨å†ŒäºŒç»´ç ",style:{width:"100%","max-width":"280px",border:"4px solid #667eea","border-radius":"12px",padding:"8px",background:"white"}},null,8,Fs),e[31]||(e[31]=s("div",{style:{"margin-top":"24px",padding:"20px",background:"rgba(102, 126, 234, 0.05)","border-radius":"12px",border:"1px solid rgba(102, 126, 234, 0.2)"}},[s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"ğŸ“± æ‰“å¼€æ‰‹æœºç›¸æœºæˆ–å¾®ä¿¡æ‰«ä¸€æ‰«"),s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"ğŸ” æ‰«æä¸Šæ–¹äºŒç»´ç "),s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"âœï¸ å¡«å†™ä¿¡æ¯å®Œæˆæ³¨å†Œ"),s("p",{style:{margin:"12px 0","font-size":"12px",color:"#666"}},"æ³¨å†ŒæˆåŠŸåå°†è‡ªåŠ¨åŠ å…¥æŠ½å¥–æ± ")],-1))])):(u(),c("div",Ms,[p(ce,{size:"large"}),e[30]||(e[30]=s("p",{style:{"margin-top":"16px",color:"#666"}},"åŠ è½½äºŒç»´ç ä¸­...",-1))]))])]),_:1},8,["open"]),s("div",Ns,[s("div",Vs,[s("div",Ws,[e[32]||(e[32]=s("span",{class:"status-icon"},"ğŸ†",-1)),e[33]||(e[33]=s("span",{class:"status-label font-body"},"æœ¬åœºä¸­å¥–",-1)),s("span",Bs,r(Q.value.length),1)]),e[36]||(e[36]=s("div",{class:"status-divider"},null,-1)),s("div",Qs,[e[34]||(e[34]=s("span",{class:"status-icon"},"ğŸ‘¥",-1)),e[35]||(e[35]=s("span",{class:"status-label font-body"},"å‚ä¸äººæ•°",-1)),s("span",Os,r(K.value.total_users||0),1)]),e[37]||(e[37]=ms('<div class="status-divider" data-v-4041906b></div><div class="status-item" data-v-4041906b><span class="status-icon" data-v-4041906b>â±ï¸</span><span class="status-label font-body" data-v-4041906b>æ´»åŠ¨çŠ¶æ€</span><span class="status-indicator live" data-v-4041906b>è¿›è¡Œä¸­</span></div>',2))])]),s("div",Js,[s("div",Ks,[s("div",js,[s("div",Gs,[j.value?b("",!0):(u(),c("div",Xs,[_.value?(u(),c("div",{key:0,class:"rolling-container",ref_key:"rollingContainerRef",ref:le},[s("div",{class:"rolling-track",ref_key:"rollingTrackRef",ref:Te},[(u(!0),c(G,null,ae(T.value,(o,A)=>(u(),c("div",{key:`${A}-${o.name}`,class:"user-item","data-index":A},[s("div",Hs,r(o.name),1),s("div",Ys,r(Ce(o.phone)),1)],8,Zs))),128))],512)],512)):b("",!0),_.value?(u(),c("div",et,[...e[38]||(e[38]=[s("div",{class:"highlight-indicator"},null,-1)])])):b("",!0),_.value?b("",!0):(u(),c("div",st,[...e[39]||(e[39]=[s("div",{class:"waiting-icon"},"ğŸ°",-1),s("h2",{class:"waiting-title font-display"},"å‡†å¤‡æŠ½å¥–",-1)])])),_.value?(u(),c("div",tt)):b("",!0),_.value?(u(),c("button",{key:4,onClick:os,class:"stop-draw-btn font-display mega-btn"}," ğŸ›‘ åœæ­¢æŠ½å¥– ")):b("",!0)])),j.value?(u(),c("div",ot,[e[40]||(e[40]=s("div",{class:"result-icon"},"ğŸ",-1)),s("h2",at,r(B(Ke)),1),s("div",lt,[(u(!0),c(G,null,ae(re.value,(o,A)=>{var W,se,te,oe,Fe;return u(),c("div",{key:o.id,class:"winner-card winner-card-mega glass",style:Ue({animationDelay:`${A*.15}s`})},[s("div",nt,r((((W=o.user)==null?void 0:W.name)||"æœªçŸ¥")[0]),1),s("div",rt,[s("div",it,r((se=o.user)==null?void 0:se.name),1),s("div",ut,r(Ce((te=o.user)==null?void 0:te.phone)),1)]),s("div",ct,[s("div",dt,r((oe=o.level)==null?void 0:oe.name),1),s("div",vt,r((Fe=o.prize)==null?void 0:Fe.name),1)])],4)}),128))]),s("button",{onClick:as,class:"continue-btn font-display mega-btn"}," ç»§ç»­æŠ½å¥– â†’ ")])):b("",!0)])])]),!j.value&&(B(E)||y.value)?(u(),c("div",pt,[s("div",mt,[e[48]||(e[48]=s("div",{class:"config-header"},[s("h3",{class:"config-title font-display"},"ğŸ® æ§åˆ¶é¢æ¿")],-1)),s("div",ft,[s("div",yt,[p(N,{onClick:e[8]||(e[8]=()=>{console.log("æŒ‰é’®è¢«ç‚¹å‡»"),es()}),size:"large",block:"",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"white",height:"48px","font-size":"16px","font-weight":"bold","margin-bottom":"16px"}},{default:m(()=>[p(B(ws)),e[41]||(e[41]=I(" ğŸ“± æ‰«ç å‚ä¸æŠ½å¥– ",-1))]),_:1}),e[42]||(e[42]=s("p",{style:{"text-align":"center",color:"#999","font-size":"12px","margin-top":"-8px","margin-bottom":"16px"}}," ç‚¹å‡»æŸ¥çœ‹äºŒç»´ç ï¼Œç”¨æˆ·æ‰«ç å³å¯æ³¨å†Œ ",-1))]),s("div",gt,[e[44]||(e[44]=s("label",{class:"form-label font-body"},"é€‰æ‹©å¥–é¡¹ç­‰çº§",-1)),p(V,{value:C.value,"onUpdate:value":e[9]||(e[9]=o=>C.value=o),placeholder:"è¯·é€‰æ‹©è¦æŠ½å–çš„å¥–é¡¹",size:"large",class:"neon-select",status:!C.value&&ie.value?"error":""},{default:m(()=>[(u(!0),c(G,null,ae(we.value,o=>(u(),Ne(q,{key:o.id,value:o.id},{default:m(()=>[s("div",_t,[s("div",wt,[s("span",bt,r(o.name),1),p(L,{color:ns(o.name),class:"level-tag"},{default:m(()=>[I(r(ls(o.name)),1)]),_:2},1032,["color"])]),s("div",ht,[s("span",kt,[e[43]||(e[43]=I(" å‰©ä½™: ",-1)),s("strong",{style:Ue({color:rs(o)})},r(o.total_stock-o.used_stock),5),I(" / "+r(o.total_stock),1)])])])]),_:2},1032,["value"]))),128))]),_:1},8,["value","status"]),!C.value&&ie.value?(u(),c("div",xt," è¯·é€‰æ‹©å¥–é¡¹ç­‰çº§ ")):b("",!0)]),s("div",Ct,[e[47]||(e[47]=s("label",{class:"form-label font-body"},"æŠ½å–äººæ•°",-1)),s("div",Pt,[p(Le,{value:P.value,"onUpdate:value":e[10]||(e[10]=o=>P.value=o),min:1,max:be.value,size:"large",class:"neon-input-number"},null,8,["value","max"]),s("div",St,[(u(),c(G,null,ae([1,3,5,10],o=>s("button",{key:o,class:de(["quick-count-btn font-display",{active:P.value===o}]),onClick:A=>P.value=o,disabled:o>be.value},r(o)+"äºº ",11,Lt)),64))])]),s("div",Ut,[e[45]||(e[45]=I(" ğŸ’¡ æœ€å¤šå¯æŠ½ ",-1)),s("strong",null,r(be.value),1),e[46]||(e[46]=I(" äºº ",-1))])]),s("div",It,[s("button",{onClick:ts,class:de(["draw-button font-display mega-draw-btn",{drawing:_.value}]),disabled:!C.value||!P.value||_.value},[_.value?(u(),c("span",zt)):b("",!0),s("span",null,r(_.value?"æŠ½å¥–ä¸­...":"ğŸ° å¼€å§‹æŠ½å¥–"),1)],10,Rt)])])])])):b("",!0),!j.value&&!(B(E)||y.value)?(u(),c("div",$t,[s("div",Tt,[e[56]||(e[56]=s("div",{class:"config-header"},[s("h3",{class:"config-title font-display"},"ğŸ“‹ æŠ½å¥–ä¿¡æ¯")],-1)),s("div",qt,[s("div",At,[e[50]||(e[50]=s("span",{class:"info-icon"},"ğŸ‘¥",-1)),s("div",Dt,[e[49]||(e[49]=s("div",{class:"info-label"},"å‚ä¸äººæ•°",-1)),s("div",Mt,r(K.value.total_users||0),1)])]),s("div",Et,[e[52]||(e[52]=s("span",{class:"info-icon"},"ğŸ¯",-1)),s("div",Ft,[e[51]||(e[51]=s("div",{class:"info-label"},"å·²æŠ½å¥–",-1)),s("div",Nt,r(K.value.drawn_users||0),1)])]),s("div",Vt,[e[54]||(e[54]=s("span",{class:"info-icon"},"â³",-1)),s("div",Wt,[e[53]||(e[53]=s("div",{class:"info-label"},"å¾…æŠ½å¥–",-1)),s("div",Bt,r(K.value.undrawn_users||0),1)])]),e[55]||(e[55]=s("div",{class:"user-notice-banner"},[s("span",{class:"notice-icon"},"ğŸ“‹"),s("p",{class:"notice-text font-body"}," æŠ½å¥–æ´»åŠ¨ç”±ç®¡ç†å‘˜ä¸»æŒï¼Œè¯·ç­‰å¾…ç®¡ç†å‘˜å¼€å§‹æŠ½å¥– ")],-1))])])])):b("",!0),Q.value.length>0?(u(),c("div",Qt,[s("div",Ot,[e[57]||(e[57]=s("h3",{class:"timeline-title font-display"},"ğŸ† ä¸­å¥–å†å²",-1)),s("div",Jt,[p(L,{color:"success",class:"count-badge"},{default:m(()=>[I(r(Q.value.length)+"äºº",1)]),_:1}),s("button",{onClick:is,class:de(["scroll-toggle font-body",{paused:!O.value}])},r(O.value?"â¸":"â–¶ï¸"),3)])]),s("div",{class:"winners-timeline",ref_key:"timelineContainerRef",ref:ye,onMouseenter:us,onMouseleave:cs},[s("div",{class:"timeline-track",ref_key:"timelineRef",ref:Je},[(u(!0),c(G,null,ae(Q.value.slice().reverse(),o=>{var A,W,se,te,oe;return u(),c("div",{key:o.id,class:"timeline-item glass"},[s("div",Kt,r((((A=o.user)==null?void 0:A.name)||"æœªçŸ¥")[0]),1),s("div",jt,[s("div",Gt,r((W=o.user)==null?void 0:W.name),1),s("div",Xt,r(Ce((se=o.user)==null?void 0:se.phone)),1)]),s("div",Zt,[s("div",Ht,r((te=o.level)==null?void 0:te.name),1),s("div",Yt,r((oe=o.prize)==null?void 0:oe.name),1)])])}),128))],512)],544)])):b("",!0)])],64))],4)}}},wo=_s(ao,[["__scopeId","data-v-4041906b"]]);export{wo as default};
