import{j as h,r as n,w as ms,o as fs,f as ys,U,V as i,_ as c,u as D,Z as s,c as d,X as m,F as G,a4 as r,G as P,W as Oe,a0 as w,$ as gs,a1 as oe,a3 as ve,a2 as Re,a5 as Je}from"./vue-vendor-6562d100.js";import{aT as _s,aS as ws}from"./vendor-a94b8c86.js";import{a as F,p as bs}from"./api-b09b12eb.js";import{r as hs}from"./request-5e349af4.js";import{_ as ks}from"./_plugin-vue_export-helper-c27b6911.js";import{a2 as xs,a3 as Cs}from"./antd-icons-bbb5d9cb.js";import{m as v}from"./antd-vue-e1953b5a.js";import"./axios-78d57de0.js";import"./dayjs-793f537c.js";const I=n(null),$e=n(null),Te=n(!1),S={id:1,code:"DEFAULT",name:"é»˜è®¤å…¬å¸",logo:"",theme_color:"#00fff5",bg_color:"#0a0f14",title:"ğŸ‰ å¹¸è¿å¤§æŠ½å¥–",subtitle:"Luck Lottery System",welcome_text:"æ¬¢è¿å‚ä¸æŠ½å¥–æ´»åŠ¨ï¼",rules_text:"æ¯äººåªèƒ½æŠ½ä¸€æ¬¡ï¼Œç¥æ‚¨å¥½è¿ï¼",draw_button_text:"ç‚¹å‡»æŠ½å¥–",success_text:"æ­å–œæ‚¨è·å¾—",contact_name:"ç®¡ç†å‘˜",contact_phone:"400-888-8888",contact_email:"admin@example.com"};async function Qe(b){if(!b){let l=null;if(window.location.hash.includes("?")){const z=window.location.hash.split("?");z.length>1&&(l=new URLSearchParams(z[1]).get("company"))}!l&&window.location.search&&(l=new URLSearchParams(window.location.search).get("company")),b=l||"DEFAULT"}$e.value=b,Te.value=!0;try{const l=await F.get("/api/company",{params:{code:b}});return I.value=l,l}catch{return I.value=S,S}finally{Te.value=!1}}function Ps(){const b=l=>{$e.value=l};return{companyConfig:h(()=>I.value||S),companyCode:h(()=>$e.value||"DEFAULT"),setCompanyCode:b,isLoading:h(()=>Te.value),themeColor:h(()=>{var l;return((l=I.value)==null?void 0:l.theme_color)||S.theme_color}),bgColor:h(()=>{var l;return((l=I.value)==null?void 0:l.bg_color)||S.bg_color}),title:h(()=>{var l;return((l=I.value)==null?void 0:l.title)||S.title}),subtitle:h(()=>{var l;return((l=I.value)==null?void 0:l.subtitle)||S.subtitle}),welcomeText:h(()=>{var l;return((l=I.value)==null?void 0:l.welcome_text)||S.welcome_text}),rulesText:h(()=>{var l;return((l=I.value)==null?void 0:l.rules_text)||S.rules_text}),drawButtonText:h(()=>{var l;return((l=I.value)==null?void 0:l.draw_button_text)||S.draw_button_text}),successText:h(()=>{var l;return((l=I.value)==null?void 0:l.success_text)||S.successText})}}function Ss(){const b=n(localStorage.getItem("lottery_user")),l=n(!!b.value),z=n({}),M=()=>{if(!b.value){z.value={};return}try{z.value=JSON.parse(b.value)}catch{z.value={}}},N=()=>{b.value=localStorage.getItem("lottery_user"),l.value=!!b.value,M()};N();const pe=f=>{if(f.token){localStorage.setItem("lottery_token",f.token);const A=f.user||f;localStorage.setItem("lottery_user",JSON.stringify(A))}else localStorage.setItem("lottery_user",JSON.stringify(f));N()},me=()=>{localStorage.removeItem("lottery_user"),localStorage.removeItem("lottery_token"),N()};return window.addEventListener("storage",f=>{(f.key==="lottery_user"||f.key===null)&&N()}),{userLoggedIn:l,currentUser:z,setUser:pe,clearUser:me,checkLoginStatus:N}}const Ls={key:0,class:"user-login-overlay"},Us={class:"login-container glass"},Is=["disabled"],zs={key:0,class:"button-spinner"},Rs={class:"neon-background"},$s={class:"top-status-bar glass"},Ts={class:"status-bar-content"},Ds={class:"status-item"},As={class:"status-icon"},qs={class:"status-label font-body"},Es={class:"status-item"},Fs={class:"status-value font-display"},Ms={class:"status-item"},Ns={class:"status-value font-display"},Vs={style:{"text-align":"center",padding:"20px 0"}},Ws={key:0,style:{padding:"40px 0"}},Bs={key:1},Os=["src"],Js={class:"top-status-bar glass"},Qs={class:"status-bar-content"},Ks={class:"status-item"},js={class:"status-value font-display"},Gs={class:"status-item"},Hs={class:"status-value font-display"},Xs={class:"lottery-content"},Zs={class:"stage-area"},Ys={class:"lottery-display"},et={class:"display-container glass neon-border-flow mega-display"},st={key:0,class:"drawing-animation"},tt=["data-index"],at={class:"user-name font-display"},ot={class:"user-phone font-mono"},lt={key:1,class:"highlight-frame"},nt={key:2,class:"waiting-overlay"},rt={key:3,class:"drawing-overlay"},it={key:1,class:"result-showcase"},ut={class:"result-title font-display"},dt={class:"winners-list"},ct={class:"winner-avatar font-display"},vt={class:"winner-info"},pt={class:"winner-name font-display"},mt={class:"winner-phone font-mono"},ft={class:"winner-prize"},yt={class:"prize-level"},gt={class:"prize-name"},_t={key:0,class:"controls-area"},wt={class:"config-card glass control-panel"},bt={class:"config-form"},ht={class:"refresh-section"},kt={class:"qr-section"},xt={class:"form-group"},Ct={class:"level-option"},Pt={class:"level-main"},St={class:"level-name font-display"},Lt={class:"level-stock"},Ut={class:"stock-text"},It={key:0,class:"form-error"},zt={class:"form-group"},Rt={class:"count-selector"},$t={class:"quick-counts"},Tt=["onClick","disabled"],Dt={class:"form-tip font-body"},At={class:"draw-actions"},qt=["disabled"],Et={key:0,class:"button-spinner"},Ft={key:1,class:"controls-area"},Mt={class:"config-card glass control-panel user-info-panel"},Nt={class:"user-info-content"},Vt={class:"info-item"},Wt={class:"info-details"},Bt={class:"info-value font-display"},Ot={class:"info-item"},Jt={class:"info-details"},Qt={class:"info-value font-display"},Kt={class:"info-item"},jt={class:"info-details"},Gt={class:"info-value font-display"},Ht={key:2,class:"timeline-area"},Xt={class:"timeline-header"},Zt={class:"timeline-controls"},Yt={class:"timeline-avatar font-display"},ea={class:"timeline-info"},sa={class:"timeline-name font-display"},ta={class:"timeline-phone font-mono"},aa={class:"timeline-prize"},oa={class:"timeline-level"},la={class:"timeline-prize-name"},na=5e3,ra=10,ia=16,ua=30,da=100,ca={__name:"Lottery",setup(b){const l=_s(),z=ws(),{userLoggedIn:M,currentUser:N,setUser:pe,clearUser:me}=Ss(),f=n(!!localStorage.getItem("admin_token")),A=n(null),R=n("guest"),k=n({username:"",password:""}),H=n(!1),X=n(!1),fe=n(!1),y=n({oldPassword:"",newPassword:"",confirmPassword:""}),Ke=async(t,e)=>e!==y.value.newPassword?Promise.reject("ä¸¤æ¬¡è¾“å…¥çš„å¯†ç ä¸ä¸€è‡´"):Promise.resolve(),je=()=>{y.value={oldPassword:"",newPassword:"",confirmPassword:""},X.value=!0},Ge=async()=>{var t,e;if(y.value.oldPassword&&y.value.newPassword&&!(y.value.newPassword.length<6)&&y.value.newPassword===y.value.confirmPassword){fe.value=!0;try{R.value==="user"?await F.post("/api/user/change-password",{old_password:y.value.oldPassword,new_password:y.value.newPassword}):await hs.post("/admin/change-password",{old_password:y.value.oldPassword,new_password:y.value.newPassword}),v.success("å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»å½•"),X.value=!1,setTimeout(()=>{De()},1e3)}catch(o){v.error(((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.error)||"ä¿®æ”¹å¯†ç å¤±è´¥ï¼Œè¯·æ£€æŸ¥å½“å‰å¯†ç æ˜¯å¦æ­£ç¡®")}finally{fe.value=!1}}},ye=async()=>{if(k.value.username&&k.value.password&&!(k.value.password.length<6)){H.value=!0;try{let t=l.query.company||p.value||"default";const e=await F.post("/api/login",{username:k.value.username,password:k.value.password},{params:{company_code:t}});e.user_type==="user"?(pe({user:e.user,token:e.token}),M.value=!0,R.value="user",v.success("ç™»å½•æˆåŠŸï¼"),e.user.company&&(p.value=e.user.company.code,Z(e.user.company.code))):(localStorage.setItem("admin_token",e.token),localStorage.setItem("admin_user",JSON.stringify(e.user)),f.value=!0,A.value=e.user,R.value=e.user_type,e.user_type==="super_admin"?v.success("ğŸ‘‘ è¶…çº§ç®¡ç†å‘˜ç™»å½•æˆåŠŸï¼"):v.success("ğŸ‘¨â€ğŸ’¼ ç®¡ç†å‘˜ç™»å½•æˆåŠŸï¼"),e.user.company&&(p.value=e.user.company.code,Z(e.user.company.code))),await Qe(p.value),await de(),Ne()}catch(t){t.response&&t.response.status===401?v.error("ç”¨æˆ·åæˆ–å¯†ç é”™è¯¯"):v.error("ç™»å½•å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•")}finally{H.value=!1}}},De=()=>{Se(),f.value?(localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),f.value=!1,A.value=null):me(),R.value="guest",v.info("å·²é€€å‡ºç™»å½•"),z.push("/")},Ae=n(null),He=n(null),ge=n(null),le=n(null),qe=n(null),ne=n(null),p=n(""),{companyCode:va,setCompanyCode:Z,themeColor:_e,title:pa,subtitle:ma,drawButtonText:fa,successText:Xe}=Ps(),re=n([]),K=n({}),B=n([]),ie=n([]),g=n(!1),j=n(!1),$=n([]),ue=n(!1),Ze=n(!1),Ye=n(!1),es=n(!1),we=n(!1),be=n(""),ss=()=>{Y.value||!le.value||(Y.value=setInterval(()=>{const t=le.value;t&&t.scrollBy({left:ra,behavior:"auto"})},ia))},Ee=()=>{Y.value&&(clearInterval(Y.value),Y.value=null)},x=n(null),C=n(1),Y=n(null),O=n(!0),ee=n(null),he=h(()=>re.value.filter(t=>t.is_active&&t.total_stock-t.used_stock>0)),ke=h(()=>{if(!x.value)return 1;const t=re.value.find(e=>e.id===x.value);return t?t.total_stock-t.used_stock:1}),Fe=async()=>{await Qe(),Me()},Me=()=>{const t=_e.value||"#00fff5",e=(_,J)=>{const L=parseInt(_.slice(1,3),16),q=parseInt(_.slice(3,5),16),Q=parseInt(_.slice(5,7),16);return`rgba(${L}, ${q}, ${Q}, ${J})`},o=document.documentElement;o.style.setProperty("--company-color",t);const u=getComputedStyle(o).getPropertyValue("--bg-secondary").trim()||"#141420";o.style.setProperty("--company-color-bg",u),o.style.setProperty("--company-color-03",e(t,.03)),o.style.setProperty("--company-color-10",e(t,.1)),o.style.setProperty("--company-color-15",e(t,.15)),o.style.setProperty("--company-color-20",e(t,.2)),o.style.setProperty("--company-color-30",e(t,.3)),o.style.setProperty("--company-color-40",e(t,.4)),o.style.setProperty("--company-color-50",e(t,.5)),o.style.setProperty("--company-color-60",e(t,.6))};ms(_e,()=>{Me()},{immediate:!0});const xe=async()=>{try{if(!p.value)return;const t=await F.get(`/api/prize-levels?company_code=${p.value}`);re.value=t}catch{}},Ce=async()=>{try{if(!p.value)return;const t=await F.get(`/api/user-stats?company_code=${p.value}`);K.value=t}catch{}},Pe=async()=>{try{if(!p.value)return;const t=await F.get(`/api/draw-records?company_code=${p.value}`);B.value=t||[]}catch{}},de=async()=>{try{await Promise.all([xe(),Ce(),Pe()])}catch{}},Ne=()=>{Se(),de(),ne.value=setInterval(()=>{de()},na)},Se=()=>{ne.value&&(clearInterval(ne.value),ne.value=null)},ts=async()=>{var t,e;try{if(!p.value){v.error("å…¬å¸ä»£ç ä¸ºç©ºï¼Œæ— æ³•è·å–äºŒç»´ç ");return}const o=`/api/qr-register?company_code=${p.value}`,u=await bs.get(o),_=u.qr_code?u:u.data&&u.data.qr_code?u.data:null;_&&_.qr_code?be.value=_.qr_code:v.error("äºŒç»´ç æ•°æ®æ ¼å¼é”™è¯¯")}catch(o){v.error(`è·å–äºŒç»´ç å¤±è´¥: ${((e=(t=o.response)==null?void 0:t.data)==null?void 0:e.error)||o.message}`)}},as=()=>{we.value=!0,ts()},Ve=async()=>{try{if(!p.value)return;const t=await F.get(`/api/available-users?company_code=${p.value}`);if(!t||t.length===0){const e=[],o=[{name:"å¼ ä¸‰",phone:"138****0001"},{name:"æå››",phone:"138****0002"},{name:"ç‹äº”",phone:"138****0003"},{name:"èµµå…­",phone:"138****0004"},{name:"é’±ä¸ƒ",phone:"138****0005"},{name:"å­™å…«",phone:"138****0006"},{name:"å‘¨ä¹",phone:"138****0007"}];for(let u=0;u<50;u++)e.push(...o);$.value=e}else{const e=[],o=Math.max(50,Math.ceil(350/t.length));for(let u=0;u<o;u++)e.push(...t);$.value=e}}catch{const e=[],o=[{name:"å¼ ä¸‰",phone:"138****0001"},{name:"æå››",phone:"138****0002"},{name:"ç‹äº”",phone:"138****0003"},{name:"èµµå…­",phone:"138****0004"},{name:"é’±ä¸ƒ",phone:"138****0005"},{name:"å­™å…«",phone:"138****0006"},{name:"å‘¨ä¹",phone:"138****0007"}];for(let u=0;u<50;u++)e.push(...o);$.value=e}},os=()=>{const t=Ae.value;if(t)for(let e=0;e<20;e++){const o=document.createElement("div");o.className="particle",o.style.left=`${Math.random()*100}%`,o.style.top=`${Math.random()*100}%`,o.style.animationDelay=`${Math.random()*5}s`,o.style.animationDuration=`${5+Math.random()*10}s`,t.appendChild(o)}},ls=async()=>{if(!x.value){ue.value=!0;return}if(!C.value||C.value<=0)return;if(await Ve(),!$.value||$.value.length===0){v.error("ç”¨æˆ·åˆ—è¡¨ä¸ºç©ºï¼Œæ— æ³•å¼€å§‹æŠ½å¥–");return}const t=re.value.find(o=>o.id===x.value);if(!t){v.error("å¥–é¡¹ä¸å­˜åœ¨");return}if(!(t.total_stock-t.used_stock<C.value)){try{if(!p.value)return;const o=await F.get(`/api/user-stats?company_code=${p.value}`);if(!o.undrawn_users||o.undrawn_users===0){v.warning("æ‰€æœ‰ç”¨æˆ·éƒ½å·²æŠ½è¿‡å¥–");return}if(o.undrawn_users<C.value){v.warning(`æœªæŠ½å¥–ç”¨æˆ·ä¸è¶³${C.value}äººï¼Œå½“å‰åªæœ‰${o.undrawn_users}äºº`);return}}catch{v.error("æ— æ³•æ£€æŸ¥ç”¨æˆ·çŠ¶æ€ï¼Œè¯·ç¨åé‡è¯•");return}g.value=!0,setTimeout(()=>{ss()},100)}},ns=async()=>{var Q,ce;Ee();const t=le.value,e=qe.value;if(!t||!e){v.error("æ— æ³•è·å–æ»šåŠ¨ä½ç½®"),g.value=!1;return}if(!$.value||$.value.length===0){v.error("ç”¨æˆ·æ•°æ®ä¸ºç©ºï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"),g.value=!1;return}const o=t.scrollLeft,u=t.clientWidth,_=o+u/2,J=e.querySelectorAll(".user-item");if(J.length===0){v.error("æœªæ‰¾åˆ°ç”¨æˆ·å…ƒç´ ï¼Œè¯·åˆ·æ–°é¡µé¢é‡è¯•"),g.value=!1;return}let L=null,q=1/0;if(J.forEach((E,V)=>{const ze=E.offsetLeft,a=E.clientWidth,T=ze+a/2,W=Math.abs(_-T);W<q&&(q=W,V<$.value.length&&(L=$.value[V]))}),!L){v.error("æ— æ³•ç¡®å®šä¸­å¥–ç”¨æˆ·"),g.value=!1;return}try{if(!p.value){v.error("å…¬å¸ä¿¡æ¯å¼‚å¸¸ï¼Œè¯·é‡æ–°ç™»å½•"),g.value=!1;return}const E={level_id:x.value,count:C.value};L.phone&&!L.phone.includes("****")&&(E.user_phone=L.phone);const V=await F.post(`/api/draw?company_code=${p.value}`,E);ie.value=Array.isArray(V)?V:[V],j.value=!0,await Ce(),await Pe(),await xe(),g.value=!1,v.success(`ğŸ‰ æˆåŠŸæŠ½å–${ie.value.length}ä½ä¸­å¥–è€…ï¼`),Ze.value=!1,Ye.value=!1,es.value=!1}catch(E){v.error(((ce=(Q=E.response)==null?void 0:Q.data)==null?void 0:ce.error)||"æŠ½å¥–å¤±è´¥"),g.value=!1}},rs=()=>{j.value=!1,ie.value=[],x.value=null,C.value=1,ue.value=!1},Le=t=>!t||t.length<7?t:t.substring(0,3)+"****"+t.substring(7),is=t=>t.includes("ä¸€ç­‰")?"ä¸€ç­‰å¥–":t.includes("äºŒç­‰")?"äºŒç­‰å¥–":t.includes("ä¸‰ç­‰")?"ä¸‰ç­‰å¥–":t.includes("å‚ä¸")?"å‚ä¸å¥–":"å¹¸è¿å¥–",us=t=>t.includes("ä¸€ç­‰")?"#f50":t.includes("äºŒç­‰")?"#fa8c16":t.includes("ä¸‰ç­‰")?"#52c41a":t.includes("å‚ä¸")?"#108ee9":"#722ed1",ds=t=>{const o=(t.total_stock-t.used_stock)/t.total_stock*100;return o===0?"#ff4d4f":o<20?"#faad14":o<50?"#1890ff":"#52c41a"},We=async()=>{(l.path==="/lottery"||l.path.startsWith("/lottery?"))&&await Fe()},Ue=()=>{ee.value||!ge.value||(ee.value=setInterval(()=>{const t=ge.value;if(!t)return;const e=t.scrollLeft,o=t.scrollWidth-t.clientWidth;e>=o-1?t.scrollTo({left:0,behavior:"auto"}):t.scrollBy({left:ua,behavior:"smooth"})},da))},Ie=()=>{ee.value&&(clearInterval(ee.value),ee.value=null)},cs=()=>{O.value?(Ie(),O.value=!1):(Ue(),O.value=!0)},vs=()=>{O.value&&Ie()},ps=()=>{O.value&&Ue()};return fs(async()=>{const t=l.query.company;t&&!p.value&&(p.value=t,Z(t));const e=localStorage.getItem("admin_token"),o=localStorage.getItem("admin_user");if(e&&o)try{A.value=JSON.parse(o),f.value=!0,A.value.company&&A.value.company.code&&(p.value=A.value.company.code,Z(A.value.company.code))}catch{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user")}p.value||(p.value="DEFAULT",Z("DEFAULT")),M.value||f.value?(await Fe(),await xe(),await Ce(),await Pe(),Ne()):companyConfig.value=S,os(),he.value.length>0&&(x.value=he.value[0].id),window.addEventListener("focus",We),await Ve(),B.value.length>0&&setTimeout(()=>{Ue()},100)}),ys(()=>{window.removeEventListener("focus",We),Ie(),Ee(),Se()}),(t,e)=>{const o=U("a-input"),u=U("a-form-item"),_=U("a-input-password"),J=U("a-form"),L=U("a-tag"),q=U("a-button"),Q=U("a-modal"),ce=U("a-spin"),E=U("a-select-option"),V=U("a-select"),ze=U("a-input-number");return i(),c("div",{class:"lottery-page",style:Re({"--company-color":D(_e)})},[!D(M)&&!f.value?(i(),c("div",Ls,[s("div",Us,[e[13]||(e[13]=s("div",{class:"login-header"},[s("div",{class:"login-icon"},"ğŸ°"),s("h1",{class:"login-title font-display"},"å¹¸è¿æŠ½å¥–"),s("p",{class:"login-subtitle font-body"},"è¯·ç™»å½•åå¼€å§‹æŠ½å¥–")],-1)),d(J,{layout:"vertical",class:"login-form"},{default:m(()=>[d(u,{label:"ç”¨æˆ·å"},{default:m(()=>[d(o,{value:k.value.username,"onUpdate:value":e[0]||(e[0]=a=>k.value.username=a),placeholder:"è¯·è¾“å…¥ç”¨æˆ·å",size:"large",onKeyup:Je(ye,["enter"])},{prefix:m(()=>[...e[11]||(e[11]=[s("span",null,"ğŸ‘¤",-1)])]),_:1},8,["value"])]),_:1}),d(u,{label:"å¯†ç "},{default:m(()=>[d(_,{value:k.value.password,"onUpdate:value":e[1]||(e[1]=a=>k.value.password=a),placeholder:"è¯·è¾“å…¥å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰",size:"large",onKeyup:Je(ye,["enter"])},{prefix:m(()=>[...e[12]||(e[12]=[s("span",null,"ğŸ”‘",-1)])]),_:1},8,["value"])]),_:1}),d(u,null,{default:m(()=>[s("button",{type:"button",onClick:ye,class:ve(["login-button font-display",{loading:H.value}]),disabled:!k.value.username||!k.value.password||k.value.password.length<6},[H.value?(i(),c("span",zs)):w("",!0),s("span",null,r(H.value?"ç™»å½•ä¸­...":"ğŸš€ ç™»å½•"),1)],10,Is)]),_:1})]),_:1}),e[14]||(e[14]=s("div",{class:"login-tips"},[s("p",{class:"tip-text font-body"},"ğŸ’¡ æ²¡æœ‰è´¦å·è¯·è”ç³»ç®¡ç†å‘˜åˆ›å»º")],-1))])])):(i(),c(G,{key:1},[s("div",Rs,[e[15]||(e[15]=s("div",{class:"gradient-orb orb-cyan"},null,-1)),e[16]||(e[16]=s("div",{class:"gradient-orb orb-magenta"},null,-1)),e[17]||(e[17]=s("div",{class:"grid-overlay"},null,-1)),s("div",{class:"particles",ref_key:"particlesRef",ref:Ae},null,512)]),s("div",$s,[s("div",Ts,[s("div",Ds,[s("span",As,r(R.value==="super_admin"?"ğŸ‘‘":R.value==="admin"?"ğŸ‘¨â€ğŸ’¼":"ğŸ‘¤"),1),s("span",qs,[P(r(D(N).name||D(N).username)+" ",1),R.value!=="user"&&R.value!=="guest"?(i(),Oe(L,{key:0,color:R.value==="super_admin"?"gold":"cyan",style:{"margin-left":"8px"}},{default:m(()=>[P(r(R.value==="super_admin"?"è¶…çº§ç®¡ç†å‘˜":"ç®¡ç†å‘˜"),1)]),_:1},8,["color"])):w("",!0)])]),e[24]||(e[24]=s("div",{class:"status-divider"},null,-1)),s("div",Es,[e[18]||(e[18]=s("span",{class:"status-icon"},"ğŸ†",-1)),e[19]||(e[19]=s("span",{class:"status-label font-body"},"æœ¬åœºä¸­å¥–",-1)),s("span",Fs,r(B.value.length),1)]),e[25]||(e[25]=s("div",{class:"status-divider"},null,-1)),s("div",Ms,[e[20]||(e[20]=s("span",{class:"status-icon"},"ğŸ‘¥",-1)),e[21]||(e[21]=s("span",{class:"status-label font-body"},"å‚ä¸äººæ•°",-1)),s("span",Ns,r(K.value.total_users||0),1)]),e[26]||(e[26]=s("div",{class:"status-divider"},null,-1)),s("div",{class:"status-item",onClick:je,style:{cursor:"pointer"}},[...e[22]||(e[22]=[s("span",{class:"status-icon"},"ğŸ”",-1),s("span",{class:"status-label font-body"},"ä¿®æ”¹å¯†ç ",-1)])]),e[27]||(e[27]=s("div",{class:"status-divider"},null,-1)),s("div",{class:"status-item logout-action",onClick:De},[...e[23]||(e[23]=[s("span",{class:"status-icon"},"ğŸšª",-1),s("span",{class:"status-label font-body"},"é€€å‡º",-1)])])])]),d(Q,{open:X.value,"onUpdate:open":e[6]||(e[6]=a=>X.value=a),title:"ä¿®æ”¹å¯†ç ",footer:null,width:"400px"},{default:m(()=>[d(J,{model:y.value,layout:"vertical",onFinish:Ge},{default:m(()=>[d(u,{label:"å½“å‰å¯†ç ",name:"oldPassword",rules:[{required:!0,message:"è¯·è¾“å…¥å½“å‰å¯†ç "}]},{default:m(()=>[d(_,{value:y.value.oldPassword,"onUpdate:value":e[2]||(e[2]=a=>y.value.oldPassword=a),placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",size:"large"},null,8,["value"])]),_:1}),d(u,{label:"æ–°å¯†ç ",name:"newPassword",rules:[{required:!0,message:"è¯·è¾“å…¥æ–°å¯†ç "},{min:6,message:"å¯†ç é•¿åº¦è‡³å°‘6ä½"}]},{default:m(()=>[d(_,{value:y.value.newPassword,"onUpdate:value":e[3]||(e[3]=a=>y.value.newPassword=a),placeholder:"è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰",size:"large"},null,8,["value"])]),_:1}),d(u,{label:"ç¡®è®¤å¯†ç ",name:"confirmPassword",rules:[{required:!0,message:"è¯·ç¡®è®¤æ–°å¯†ç "},{validator:Ke}]},{default:m(()=>[d(_,{value:y.value.confirmPassword,"onUpdate:value":e[4]||(e[4]=a=>y.value.confirmPassword=a),placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",size:"large"},null,8,["value"])]),_:1},8,["rules"]),d(u,null,{default:m(()=>[d(q,{type:"primary","html-type":"submit",loading:fe.value,block:"",size:"large"},{default:m(()=>[...e[28]||(e[28]=[P(" ç¡®è®¤ä¿®æ”¹ ",-1)])]),_:1},8,["loading"]),d(q,{style:{"margin-top":"8px"},block:"",size:"large",onClick:e[5]||(e[5]=a=>X.value=!1)},{default:m(()=>[...e[29]||(e[29]=[P(" å–æ¶ˆ ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open"]),d(Q,{open:we.value,"onUpdate:open":e[7]||(e[7]=a=>we.value=a),title:"æ‰«ç å‚ä¸æŠ½å¥–",footer:null,width:"400px"},{default:m(()=>[s("div",Vs,[be.value?(i(),c("div",Bs,[s("img",{src:be.value,alt:"æ³¨å†ŒäºŒç»´ç ",style:{width:"100%","max-width":"280px",border:"4px solid #667eea","border-radius":"12px",padding:"8px",background:"white"}},null,8,Os),e[31]||(e[31]=s("div",{style:{"margin-top":"24px",padding:"20px",background:"rgba(102, 126, 234, 0.05)","border-radius":"12px",border:"1px solid rgba(102, 126, 234, 0.2)"}},[s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"ğŸ“± æ‰“å¼€æ‰‹æœºç›¸æœºæˆ–å¾®ä¿¡æ‰«ä¸€æ‰«"),s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"ğŸ” æ‰«æä¸Šæ–¹äºŒç»´ç "),s("p",{style:{margin:"12px 0","font-size":"14px",color:"#333"}},"âœï¸ å¡«å†™ä¿¡æ¯å®Œæˆæ³¨å†Œ"),s("p",{style:{margin:"12px 0","font-size":"12px",color:"#666"}},"æ³¨å†ŒæˆåŠŸåå°†è‡ªåŠ¨åŠ å…¥æŠ½å¥–æ± ")],-1))])):(i(),c("div",Ws,[d(ce,{size:"large"}),e[30]||(e[30]=s("p",{style:{"margin-top":"16px",color:"#666"}},"åŠ è½½äºŒç»´ç ä¸­...",-1))]))])]),_:1},8,["open"]),s("div",Js,[s("div",Qs,[s("div",Ks,[e[32]||(e[32]=s("span",{class:"status-icon"},"ğŸ†",-1)),e[33]||(e[33]=s("span",{class:"status-label font-body"},"æœ¬åœºä¸­å¥–",-1)),s("span",js,r(B.value.length),1)]),e[36]||(e[36]=s("div",{class:"status-divider"},null,-1)),s("div",Gs,[e[34]||(e[34]=s("span",{class:"status-icon"},"ğŸ‘¥",-1)),e[35]||(e[35]=s("span",{class:"status-label font-body"},"å‚ä¸äººæ•°",-1)),s("span",Hs,r(K.value.total_users||0),1)]),e[37]||(e[37]=gs('<div class="status-divider" data-v-a55b56dc></div><div class="status-item" data-v-a55b56dc><span class="status-icon" data-v-a55b56dc>â±ï¸</span><span class="status-label font-body" data-v-a55b56dc>æ´»åŠ¨çŠ¶æ€</span><span class="status-indicator live" data-v-a55b56dc>è¿›è¡Œä¸­</span></div>',2))])]),s("div",Xs,[s("div",Zs,[s("div",Ys,[s("div",et,[j.value?w("",!0):(i(),c("div",st,[g.value?(i(),c("div",{key:0,class:"rolling-container",ref_key:"rollingContainerRef",ref:le},[s("div",{class:"rolling-track",ref_key:"rollingTrackRef",ref:qe},[(i(!0),c(G,null,oe($.value,(a,T)=>(i(),c("div",{key:`${T}-${a.name}`,class:"user-item","data-index":T},[s("div",at,r(a.name),1),s("div",ot,r(Le(a.phone)),1)],8,tt))),128))],512)],512)):w("",!0),g.value?(i(),c("div",lt,[...e[38]||(e[38]=[s("div",{class:"highlight-indicator"},null,-1)])])):w("",!0),g.value?w("",!0):(i(),c("div",nt,[...e[39]||(e[39]=[s("div",{class:"waiting-icon"},"ğŸ°",-1),s("h2",{class:"waiting-title font-display"},"å‡†å¤‡æŠ½å¥–",-1)])])),g.value?(i(),c("div",rt)):w("",!0),g.value?(i(),c("button",{key:4,onClick:ns,class:"stop-draw-btn font-display mega-btn"}," ğŸ›‘ åœæ­¢æŠ½å¥– ")):w("",!0)])),j.value?(i(),c("div",it,[e[40]||(e[40]=s("div",{class:"result-icon"},"ğŸ",-1)),s("h2",ut,r(D(Xe)),1),s("div",dt,[(i(!0),c(G,null,oe(ie.value,(a,T)=>{var W,se,te,ae,Be;return i(),c("div",{key:a.id,class:"winner-card winner-card-mega glass",style:Re({animationDelay:`${T*.15}s`})},[s("div",ct,r((((W=a.user)==null?void 0:W.name)||"æœªçŸ¥")[0]),1),s("div",vt,[s("div",pt,r((se=a.user)==null?void 0:se.name),1),s("div",mt,r(Le((te=a.user)==null?void 0:te.phone)),1)]),s("div",ft,[s("div",yt,r((ae=a.level)==null?void 0:ae.name),1),s("div",gt,r((Be=a.prize)==null?void 0:Be.name),1)])],4)}),128))]),s("button",{onClick:rs,class:"continue-btn font-display mega-btn"}," ç»§ç»­æŠ½å¥– â†’ ")])):w("",!0)])])]),!j.value&&(D(M)||f.value)?(i(),c("div",_t,[s("div",wt,[e[50]||(e[50]=s("div",{class:"config-header"},[s("h3",{class:"config-title font-display"},"ğŸ® æ§åˆ¶é¢æ¿")],-1)),s("div",bt,[s("div",ht,[d(q,{onClick:e[8]||(e[8]=()=>{de(),D(v).success("æ•°æ®å·²åˆ·æ–°")}),size:"large",block:"",style:{background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)",border:"none",color:"white",height:"40px","font-size":"14px","font-weight":"bold","margin-bottom":"12px"}},{default:m(()=>[d(D(xs),{spin:!1}),e[41]||(e[41]=P(" ğŸ”„ åˆ·æ–°æ•°æ® ",-1))]),_:1}),e[42]||(e[42]=s("p",{style:{"text-align":"center",color:"#999","font-size":"11px","margin-top":"-8px","margin-bottom":"12px"}}," æ•°æ®æ¯ 5 ç§’è‡ªåŠ¨åˆ·æ–° ",-1))]),s("div",kt,[d(q,{onClick:as,size:"large",block:"",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",border:"none",color:"white",height:"48px","font-size":"16px","font-weight":"bold","margin-bottom":"16px"}},{default:m(()=>[d(D(Cs)),e[43]||(e[43]=P(" ğŸ“± æ‰«ç å‚ä¸æŠ½å¥– ",-1))]),_:1}),e[44]||(e[44]=s("p",{style:{"text-align":"center",color:"#999","font-size":"12px","margin-top":"-8px","margin-bottom":"16px"}}," ç‚¹å‡»æŸ¥çœ‹äºŒç»´ç ï¼Œç”¨æˆ·æ‰«ç å³å¯æ³¨å†Œ ",-1))]),s("div",xt,[e[46]||(e[46]=s("label",{class:"form-label font-body"},"é€‰æ‹©å¥–é¡¹ç­‰çº§",-1)),d(V,{value:x.value,"onUpdate:value":e[9]||(e[9]=a=>x.value=a),placeholder:"è¯·é€‰æ‹©è¦æŠ½å–çš„å¥–é¡¹",size:"large",class:"neon-select",status:!x.value&&ue.value?"error":""},{default:m(()=>[(i(!0),c(G,null,oe(he.value,a=>(i(),Oe(E,{key:a.id,value:a.id},{default:m(()=>[s("div",Ct,[s("div",Pt,[s("span",St,r(a.name),1),d(L,{color:us(a.name),class:"level-tag"},{default:m(()=>[P(r(is(a.name)),1)]),_:2},1032,["color"])]),s("div",Lt,[s("span",Ut,[e[45]||(e[45]=P(" å‰©ä½™: ",-1)),s("strong",{style:Re({color:ds(a)})},r(a.total_stock-a.used_stock),5),P(" / "+r(a.total_stock),1)])])])]),_:2},1032,["value"]))),128))]),_:1},8,["value","status"]),!x.value&&ue.value?(i(),c("div",It," è¯·é€‰æ‹©å¥–é¡¹ç­‰çº§ ")):w("",!0)]),s("div",zt,[e[49]||(e[49]=s("label",{class:"form-label font-body"},"æŠ½å–äººæ•°",-1)),s("div",Rt,[d(ze,{value:C.value,"onUpdate:value":e[10]||(e[10]=a=>C.value=a),min:1,max:ke.value,size:"large",class:"neon-input-number"},null,8,["value","max"]),s("div",$t,[(i(),c(G,null,oe([1,3,5,10],a=>s("button",{key:a,class:ve(["quick-count-btn font-display",{active:C.value===a}]),onClick:T=>C.value=a,disabled:a>ke.value},r(a)+"äºº ",11,Tt)),64))])]),s("div",Dt,[e[47]||(e[47]=P(" ğŸ’¡ æœ€å¤šå¯æŠ½ ",-1)),s("strong",null,r(ke.value),1),e[48]||(e[48]=P(" äºº ",-1))])]),s("div",At,[s("button",{onClick:ls,class:ve(["draw-button font-display mega-draw-btn",{drawing:g.value}]),disabled:!x.value||!C.value||g.value},[g.value?(i(),c("span",Et)):w("",!0),s("span",null,r(g.value?"æŠ½å¥–ä¸­...":"ğŸ° å¼€å§‹æŠ½å¥–"),1)],10,qt)])])])])):w("",!0),!j.value&&!(D(M)||f.value)?(i(),c("div",Ft,[s("div",Mt,[e[58]||(e[58]=s("div",{class:"config-header"},[s("h3",{class:"config-title font-display"},"ğŸ“‹ æŠ½å¥–ä¿¡æ¯")],-1)),s("div",Nt,[s("div",Vt,[e[52]||(e[52]=s("span",{class:"info-icon"},"ğŸ‘¥",-1)),s("div",Wt,[e[51]||(e[51]=s("div",{class:"info-label"},"å‚ä¸äººæ•°",-1)),s("div",Bt,r(K.value.total_users||0),1)])]),s("div",Ot,[e[54]||(e[54]=s("span",{class:"info-icon"},"ğŸ¯",-1)),s("div",Jt,[e[53]||(e[53]=s("div",{class:"info-label"},"å·²æŠ½å¥–",-1)),s("div",Qt,r(K.value.drawn_users||0),1)])]),s("div",Kt,[e[56]||(e[56]=s("span",{class:"info-icon"},"â³",-1)),s("div",jt,[e[55]||(e[55]=s("div",{class:"info-label"},"å¾…æŠ½å¥–",-1)),s("div",Gt,r(K.value.undrawn_users||0),1)])]),e[57]||(e[57]=s("div",{class:"user-notice-banner"},[s("span",{class:"notice-icon"},"ğŸ“‹"),s("p",{class:"notice-text font-body"}," æŠ½å¥–æ´»åŠ¨ç”±ç®¡ç†å‘˜ä¸»æŒï¼Œè¯·ç­‰å¾…ç®¡ç†å‘˜å¼€å§‹æŠ½å¥– ")],-1))])])])):w("",!0),B.value.length>0?(i(),c("div",Ht,[s("div",Xt,[e[59]||(e[59]=s("h3",{class:"timeline-title font-display"},"ğŸ† ä¸­å¥–å†å²",-1)),s("div",Zt,[d(L,{color:"success",class:"count-badge"},{default:m(()=>[P(r(B.value.length)+"äºº",1)]),_:1}),s("button",{onClick:cs,class:ve(["scroll-toggle font-body",{paused:!O.value}])},r(O.value?"â¸":"â–¶ï¸"),3)])]),s("div",{class:"winners-timeline",ref_key:"timelineContainerRef",ref:ge,onMouseenter:vs,onMouseleave:ps},[s("div",{class:"timeline-track",ref_key:"timelineRef",ref:He},[(i(!0),c(G,null,oe(B.value.slice().reverse(),a=>{var T,W,se,te,ae;return i(),c("div",{key:a.id,class:"timeline-item glass"},[s("div",Yt,r((((T=a.user)==null?void 0:T.name)||"æœªçŸ¥")[0]),1),s("div",ea,[s("div",sa,r((W=a.user)==null?void 0:W.name),1),s("div",ta,r(Le((se=a.user)==null?void 0:se.phone)),1)]),s("div",aa,[s("div",oa,r((te=a.level)==null?void 0:te.name),1),s("div",la,r((ae=a.prize)==null?void 0:ae.name),1)])])}),128))],512)],544)])):w("",!0)])],64))],4)}}},Pa=ks(ca,[["__scopeId","data-v-a55b56dc"]]);export{Pa as default};
