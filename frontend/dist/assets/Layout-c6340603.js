import{aR as I,aS as E}from"./vendor-af4d91ab.js";import{r as G}from"./request-57094e38.js";import{_ as $}from"./_plugin-vue_export-helper-c27b6911.js";import{a8 as j,a9 as q,a6 as H,aa as J,F as K,ab as W,a5 as X,ac as Z,ad as Q,a7 as Y,ae as aa,D as sa}from"./antd-icons-16470984.js";import{j as S,U as d,V as c,_ as y,Z as s,a0 as g,c as o,X as e,a3 as u,W as O,u as l,a4 as P,r as C,G as f}from"./vue-vendor-6562d100.js";import{m}from"./antd-vue-821a3ecc.js";import"./axios-78d57de0.js";import"./dayjs-793f537c.js";const oa={class:"admin-layout-container"},na={class:"sidebar-header"},ea={key:0,class:"logo-text font-display"},ta={class:"sidebar-nav"},la={key:0,class:"sidebar-footer"},da={class:"main-wrapper"},ra={class:"top-bar glass"},ia={class:"top-left"},ua=["title"],ma={class:"breadcrumb"},va={class:"breadcrumb-item current font-body"},pa={class:"top-right"},ca={class:"user-section"},fa={key:1,class:"company-name font-body"},ba={class:"user-trigger"},_a={class:"user-avatar font-display"},wa={class:"user-name font-body"},ya={class:"main-content"},ga={__name:"Layout",setup(Pa){const L=I(),w=E(),v=C(!1),b=C(!1),t=C({oldPassword:"",newPassword:"",confirmPassword:""}),p=n=>n==="/admin/dashboard"?w.path==="/admin/dashboard"||w.path==="/admin/dashboard/":w.path===n,N=S(()=>{const n=w.path;return n==="/admin/dashboard"||n==="/admin/dashboard/"?"æ•°æ®æ¦‚è§ˆ":n.includes("/admin/dashboard/companies")?"å…¬å¸ç®¡ç†":n.includes("/admin/dashboard/users")?"ç”¨æˆ·ç®¡ç†":n.includes("/admin/dashboard/prizes")?"å¥–å“ç®¡ç†":n.includes("/admin/dashboard/records")?"æŠ½å¥–è®°å½•":n.includes("/admin/dashboard/operation-logs")?"æ“ä½œæ—¥å¿—":n.includes("/admin/dashboard/admins")?"ç®¡ç†å‘˜ç®¡ç†":"ç®¡ç†åå°"}),_=S(()=>{const n=localStorage.getItem("admin_user");return n?JSON.parse(n):{}}),h=()=>{localStorage.removeItem("admin_token"),localStorage.removeItem("admin_user"),m.success("å·²é€€å‡ºç™»å½•"),L.push("/admin")},R=()=>{t.value={oldPassword:"",newPassword:"",confirmPassword:""},b.value=!0},V=async()=>{var n,a;if(!t.value.oldPassword){m.warning("è¯·è¾“å…¥å½“å‰å¯†ç ");return}if(!t.value.newPassword){m.warning("è¯·è¾“å…¥æ–°å¯†ç ");return}if(t.value.newPassword.length<6){m.warning("æ–°å¯†ç é•¿åº¦è‡³å°‘ä¸º6ä½");return}if(t.value.newPassword!==t.value.confirmPassword){m.warning("ä¸¤æ¬¡è¾“å…¥çš„æ–°å¯†ç ä¸ä¸€è‡´");return}if(t.value.oldPassword===t.value.newPassword){m.warning("æ–°å¯†ç ä¸èƒ½ä¸å½“å‰å¯†ç ç›¸åŒ");return}try{await G.post("/admin/change-password",{old_password:t.value.oldPassword,new_password:t.value.newPassword}),m.success("å¯†ç ä¿®æ”¹æˆåŠŸï¼Œè¯·é‡æ–°ç™»å½•"),b.value=!1,setTimeout(()=>{h()},1500)}catch(r){m.error(((a=(n=r.response)==null?void 0:n.data)==null?void 0:a.error)||"å¯†ç ä¿®æ”¹å¤±è´¥")}};return(n,a)=>{const r=d("router-link"),A=d("a-tag"),U=d("a-menu-item"),M=d("a-menu-divider"),T=d("a-menu"),z=d("a-dropdown"),B=d("router-view"),k=d("a-input-password"),x=d("a-form-item"),D=d("a-form"),F=d("a-modal");return c(),y("div",oa,[s("aside",{class:u(["sidebar",{"sidebar--collapsed":v.value}])},[s("div",na,[a[6]||(a[6]=s("div",{class:"logo-icon"},"ğŸ°",-1)),v.value?g("",!0):(c(),y("h2",ea,"MAKERROOT"))]),s("nav",ta,[o(r,{to:"/admin/dashboard",class:u(["nav-item",{active:p("/admin/dashboard")}])},{default:e(()=>[o(l(j),{class:"nav-icon"}),a[7]||(a[7]=s("span",{class:"nav-text font-body"},"æ•°æ®æ¦‚è§ˆ",-1)),a[8]||(a[8]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/companies",class:u(["nav-item",{active:p("/admin/dashboard/companies")}])},{default:e(()=>[o(l(q),{class:"nav-icon"}),a[9]||(a[9]=s("span",{class:"nav-text font-body"},"å…¬å¸ç®¡ç†",-1)),a[10]||(a[10]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/users",class:u(["nav-item",{active:p("/admin/dashboard/users")}])},{default:e(()=>[o(l(H),{class:"nav-icon"}),a[11]||(a[11]=s("span",{class:"nav-text font-body"},"ç”¨æˆ·ç®¡ç†",-1)),a[12]||(a[12]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/prizes",class:u(["nav-item",{active:p("/admin/dashboard/prizes")}])},{default:e(()=>[o(l(J),{class:"nav-icon"}),a[13]||(a[13]=s("span",{class:"nav-text font-body"},"å¥–å“ç®¡ç†",-1)),a[14]||(a[14]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/records",class:u(["nav-item",{active:p("/admin/dashboard/records")}])},{default:e(()=>[o(l(K),{class:"nav-icon"}),a[15]||(a[15]=s("span",{class:"nav-text font-body"},"æŠ½å¥–è®°å½•",-1)),a[16]||(a[16]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/operation-logs",class:u(["nav-item",{active:p("/admin/dashboard/operation-logs")}])},{default:e(()=>[o(l(W),{class:"nav-icon"}),a[17]||(a[17]=s("span",{class:"nav-text font-body"},"æ“ä½œæ—¥å¿—",-1)),a[18]||(a[18]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"]),o(r,{to:"/admin/dashboard/admins",class:u(["nav-item",{active:p("/admin/dashboard/admins")}])},{default:e(()=>[o(l(X),{class:"nav-icon"}),a[19]||(a[19]=s("span",{class:"nav-text font-body"},"ç®¡ç†å‘˜ç®¡ç†",-1)),a[20]||(a[20]=s("div",{class:"nav-indicator"},null,-1))]),_:1},8,["class"])]),v.value?g("",!0):(c(),y("div",la,[...a[21]||(a[21]=[s("div",{class:"footer-info"},[s("p",{class:"footer-version font-mono"},"v2.0.0"),s("p",{class:"footer-copyright"},"Â© 2026 MakerRoot Admin")],-1)])]))],2),s("div",da,[s("header",ra,[s("div",ia,[s("button",{onClick:a[0]||(a[0]=i=>v.value=!v.value),class:"toggle-btn",title:v.value?"å±•å¼€ä¾§è¾¹æ ":"æ”¶èµ·ä¾§è¾¹æ "},[v.value?(c(),O(l(Z),{key:0})):(c(),O(l(Q),{key:1}))],8,ua),s("div",ma,[a[22]||(a[22]=s("span",{class:"breadcrumb-item font-body"},"ç®¡ç†åå°",-1)),a[23]||(a[23]=s("span",{class:"breadcrumb-separator"},"/",-1)),s("span",va,P(N.value),1)])]),s("div",pa,[s("div",ca,[_.value.is_super_admin?(c(),O(A,{key:0,color:"purple",class:"super-tag"},{default:e(()=>[...a[24]||(a[24]=[f(" è¶…çº§ç®¡ç†å‘˜ ",-1)])]),_:1})):g("",!0),_.value.company?(c(),y("span",fa,P(_.value.company.name),1)):g("",!0)]),o(z,null,{overlay:e(()=>[o(T,{class:"user-dropdown-menu"},{default:e(()=>[o(U,{onClick:R},{default:e(()=>[o(l(Y)),a[25]||(a[25]=f(" ä¿®æ”¹å¯†ç  ",-1))]),_:1}),o(M),o(U,{onClick:h,class:"logout-item"},{default:e(()=>[o(l(aa)),a[26]||(a[26]=f(" é€€å‡ºç™»å½• ",-1))]),_:1})]),_:1})]),default:e(()=>[s("div",ba,[s("div",_a,P((_.value.username||"A")[0].toUpperCase()),1),s("span",wa,P(_.value.username||"Admin"),1),o(l(sa),{class:"dropdown-icon"})])]),_:1})])]),s("main",ya,[o(B)])]),o(F,{open:b.value,"onUpdate:open":a[4]||(a[4]=i=>b.value=i),title:"ä¿®æ”¹å¯†ç ",width:"500px",maskClosable:!1,onOk:V,onCancel:a[5]||(a[5]=i=>b.value=!1)},{default:e(()=>[o(D,{model:t.value,layout:"vertical"},{default:e(()=>[o(x,null,{default:e(()=>[a[27]||(a[27]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ”‘"),f(" å½“å‰å¯†ç  ")],-1)),o(k,{value:t.value.oldPassword,"onUpdate:value":a[1]||(a[1]=i=>t.value.oldPassword=i),placeholder:"è¯·è¾“å…¥å½“å‰å¯†ç ",class:"neon-input"},null,8,["value"])]),_:1}),o(x,null,{default:e(()=>[a[28]||(a[28]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ”’"),f(" æ–°å¯†ç  ")],-1)),o(k,{value:t.value.newPassword,"onUpdate:value":a[2]||(a[2]=i=>t.value.newPassword=i),placeholder:"è¯·è¾“å…¥æ–°å¯†ç ï¼ˆè‡³å°‘6ä½ï¼‰",class:"neon-input"},null,8,["value"])]),_:1}),o(x,null,{default:e(()=>[a[29]||(a[29]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"âœ“"),f(" ç¡®è®¤æ–°å¯†ç  ")],-1)),o(k,{value:t.value.confirmPassword,"onUpdate:value":a[3]||(a[3]=i=>t.value.confirmPassword=i),placeholder:"è¯·å†æ¬¡è¾“å…¥æ–°å¯†ç ",class:"neon-input"},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["open"])])}}},Na=$(ga,[["__scopeId","data-v-deb2375e"]]);export{Na as default};
