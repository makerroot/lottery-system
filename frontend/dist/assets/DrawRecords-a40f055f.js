import{r as q}from"./request-5e349af4.js";import{_ as G}from"./_plugin-vue_export-helper-c27b6911.js";import{aj as L}from"./antd-icons-bbb5d9cb.js";import{o as M,U as u,V as r,_ as d,Z as t,c as l,X as _,a4 as a,r as v,u as O,G as h,F as W,W as X,a0 as Z}from"./vue-vendor-6562d100.js";import{m as V}from"./antd-vue-e1953b5a.js";import"./axios-78d57de0.js";import"./vendor-a94b8c86.js";import"./dayjs-793f537c.js";const $={class:"drawrecords-page"},A={class:"page-header"},H={class:"header-right"},J={class:"stats-cards"},K={class:"stat-card"},Q={class:"stat-content"},Y={class:"stat-value"},N={class:"stat-card"},tt={class:"stat-content"},et={class:"stat-value"},st={class:"stat-card"},at={class:"stat-content"},ot={class:"stat-value"},nt={class:"stat-card"},rt={class:"stat-content"},it={class:"stat-value"},dt={key:1,class:"no-data"},lt={key:1,class:"user-cell"},ct={class:"user-avatar"},ut={class:"user-info"},_t={class:"user-name font-body"},pt={class:"user-phone"},vt={key:2,class:"prize-cell"},gt={class:"prize-name"},ft={key:3,class:"time-cell"},mt={class:"time-date"},yt={__name:"DrawRecords",setup(ht){const p=v([]),g=v(""),c=v({total_records:0,today_records:0,companies_count:0,draw_rate:0}),n=v({current:1,pageSize:20,total:0,showSizeChanger:!0,showTotal:e=>`å…± ${e} æ¡`}),B=[{title:"ID",dataIndex:"id",key:"id",width:80},{title:"æ‰€å±žå…¬å¸",key:"company",width:150},{title:"ä¸­å¥–ç”¨æˆ·",key:"user",width:250},{title:"ä¸­å¥–å¥–å“",key:"prize",width:200},{title:"æŠ½å¥–æ—¶é—´",key:"time",width:200}],f=async()=>{try{const e=await q.get("/admin/draw-records",{params:{page:n.value.current,page_size:n.value.pageSize,search:g.value}});p.value=e.data||e,n.value.total=e.total||e.length,c.value={total_records:e.total||e.length||0,today_records:p.value.filter(s=>{const m=new Date(s.created_at).toDateString(),y=new Date().toDateString();return m===y}).length,companies_count:[...new Set(p.value.map(s=>s.company_id))].length,draw_rate:0}}catch{V.error("èŽ·å–è®°å½•å¤±è´¥")}},I=()=>{n.value.current=1,f()},R=e=>{n.value.current=e.current,n.value.pageSize=e.pageSize,f()},T=e=>e?new Date(e).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",E=e=>e?e.includes("ä¸€ç­‰")?"ðŸ¥‡":e.includes("äºŒç­‰")?"ðŸ¥ˆ":e.includes("ä¸‰ç­‰")?"ðŸ¥‰":e.includes("å‚ä¸Ž")?"ðŸŽ":"ðŸ†":"ðŸŽ",F=e=>e?e.includes("ä¸€ç­‰")?"red":e.includes("äºŒç­‰")?"orange":e.includes("ä¸‰ç­‰")?"green":e.includes("å‚ä¸Ž")?"blue":"purple":"default",P=()=>{V.info("å¯¼å‡ºåŠŸèƒ½å¼€å‘ä¸­...")};return M(()=>{f()}),(e,s)=>{const m=u("a-input-search"),y=u("a-button"),U=u("a-space"),b=u("a-tag"),j=u("a-table");return r(),d("div",$,[t("div",A,[s[2]||(s[2]=t("div",{class:"header-left"},[t("h1",{class:"page-title font-display"},"ðŸ“‹ æŠ½å¥–è®°å½•"),t("p",{class:"page-subtitle font-body"},"æŸ¥çœ‹æ‰€æœ‰ä¸­å¥–è®°å½•å’Œè¯¦ç»†ä¿¡æ¯")],-1)),t("div",H,[l(U,null,{default:_(()=>[l(m,{value:g.value,"onUpdate:value":s[0]||(s[0]=i=>g.value=i),placeholder:"æœç´¢æ‰‹æœºå·æˆ–å§“å",style:{width:"300px"},onSearch:I,"allow-clear":"",class:"neon-input"},null,8,["value"]),l(y,{onClick:P,class:"export-btn neon-button"},{default:_(()=>[l(O(L)),s[1]||(s[1]=h(" å¯¼å‡ºæ•°æ® ",-1))]),_:1})]),_:1})])]),t("div",J,[t("div",K,[s[4]||(s[4]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}}," ðŸŽŠ ",-1)),t("div",Q,[t("div",Y,a(c.value.total_records),1),s[3]||(s[3]=t("div",{class:"stat-label font-body"},"æ€»è®°å½•æ•°",-1))])]),t("div",N,[s[6]||(s[6]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #52c41a 0%, #73d13d 100%)"}}," ðŸŽ ",-1)),t("div",tt,[t("div",et,a(c.value.today_records),1),s[5]||(s[5]=t("div",{class:"stat-label font-body"},"ä»Šæ—¥ä¸­å¥–",-1))])]),t("div",st,[s[8]||(s[8]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #faad14 0%, #ffc53d 100%)"}}," ðŸ¢ ",-1)),t("div",at,[t("div",ot,a(c.value.companies_count),1),s[7]||(s[7]=t("div",{class:"stat-label font-body"},"å‚ä¸Žå…¬å¸",-1))])]),t("div",nt,[s[10]||(s[10]=t("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, #1890ff 0%, #40a9ff 100%)"}}," ðŸ“ˆ ",-1)),t("div",rt,[t("div",it,a(c.value.draw_rate)+"%",1),s[9]||(s[9]=t("div",{class:"stat-label font-body"},"ä¸­å¥–çŽ‡",-1))])])]),l(j,{columns:B,"data-source":p.value,pagination:n.value,onChange:R,"row-key":"id",class:"records-table"},{bodyCell:_(({column:i,record:o})=>{var k,w,z,D,x;return[i.key==="company"?(r(),d(W,{key:0},[o.company?(r(),X(b,{key:0,color:o.company.theme_color||"blue"},{default:_(()=>[h(a(o.company.name),1)]),_:2},1032,["color"])):(r(),d("span",dt,"-"))],64)):i.key==="user"?(r(),d("div",lt,[t("div",ct,a((((k=o.user)==null?void 0:k.name)||"æœª")[0]),1),t("div",ut,[t("div",_t,a(((w=o.user)==null?void 0:w.name)||"æœªè®¾ç½®"),1),t("div",pt,a(((z=o.user)==null?void 0:z.phone)||"-"),1)])])):i.key==="prize"?(r(),d("div",vt,[l(b,{color:F((D=o.level)==null?void 0:D.name),class:"prize-level-tag"},{default:_(()=>{var S,C;return[h(a(E((S=o.level)==null?void 0:S.name))+" "+a((C=o.level)==null?void 0:C.name),1)]}),_:2},1032,["color"]),t("div",gt,a(((x=o.prize)==null?void 0:x.name)||"-"),1)])):i.key==="time"?(r(),d("div",ft,[t("div",mt,a(T(o.created_at)),1)])):Z("",!0)]}),_:1},8,["data-source","pagination"])])}}},Vt=G(yt,[["__scopeId","data-v-28e39f63"]]);export{Vt as default};
