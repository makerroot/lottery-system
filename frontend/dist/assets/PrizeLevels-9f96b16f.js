import{r as w}from"./request-57094e38.js";import{t as je}from"./form-7cc1eb58.js";import{_ as De}from"./_plugin-vue_export-helper-c27b6911.js";import{j as h,o as qe,U as _,V as d,_ as v,Z as s,c as l,X as n,G as o,a4 as i,a2 as ke,a0 as $,F as A,a1 as W,W as L,r as f,u as g,a3 as Je}from"./vue-vendor-6562d100.js";import{m}from"./antd-vue-821a3ecc.js";import{P as ge,ah as Qe,af as Re,aa as X,T as ne,N as oe}from"./antd-icons-16470984.js";import"./axios-78d57de0.js";import"./vendor-af4d91ab.js";import"./dayjs-793f537c.js";const We={class:"prizelevels-page"},Xe={class:"page-header"},Ze={class:"header-right"},He={class:"filter-bar glass-card"},Ke={class:"filter-left"},Ye={class:"filter-item"},et={class:"company-option"},tt={class:"company-name"},st={class:"company-code"},lt={class:"filter-stats"},at={class:"stat-item font-body"},nt={key:0,class:"stat-item font-body"},ot={class:"stats-cards"},it={class:"stat-card glass-card"},dt={class:"stat-content"},rt={class:"stat-value"},ut={class:"stat-card glass-card"},ct={class:"stat-content"},vt={class:"stat-value"},_t={class:"stat-card glass-card"},pt={class:"stat-content"},ft={class:"stat-value"},mt={class:"stat-card glass-card"},yt={class:"stat-content"},kt={class:"stat-value"},gt={class:"stat-card glass-card"},bt={class:"stat-content"},zt={class:"stat-value"},wt={class:"view-controls"},ht={class:"view-switcher"},Ct={key:0,class:"prizelevels-list"},xt={class:"level-icon"},Pt={class:"level-info"},Lt={class:"level-name"},St={class:"level-description"},Ut={class:"level-card-body"},$t={class:"level-stats"},Ot={class:"level-stat"},It={class:"level-stat-value"},Vt={class:"level-stat"},At={class:"level-progress"},Mt={class:"level-company"},Nt={key:1,class:"no-company"},Bt={class:"level-actions"},Et={key:1,class:"prizelevels-table"},Ft={key:0,class:"table-level-name"},Tt={class:"level-icon-small"},Gt={class:"name-text"},jt={class:"description-text"},Dt={key:1,class:"no-company"},qt={key:2,class:"stock-info"},Jt={style:{display:"flex","align-items":"center",gap:"12px"}},Qt={class:"prizes-management"},Rt={class:"prizes-header"},Wt={class:"prizes-count"},Xt={key:0,class:"empty-prizes"},Zt={key:1,class:"prizes-list"},Ht={key:0,class:"prize-edit-form"},Kt={key:1,class:"prize-info"},Yt={class:"prize-details"},es={class:"prize-name"},ts={class:"prize-stock"},ss={class:"prize-actions"},ls={key:2,class:"add-prize-form"},as={__name:"PrizeLevels",setup(ns){const O=f([]),T=f([]),C=f([]),I=f(!1),M=f(null),N=f(!1),G=f(null),S=f(null),Z=f(!1),j=f(!1),H=f("table"),y=f({company_id:void 0,name:"",description:"",sort_order:0,is_active:!0}),D=f(!1),U=f(null),B=f([]),q=f(!1),c=f({name:"",level_id:null,total_stock:1,used_stock:0}),x=f(null),be=[{title:"å¥–é¡¹åç§°",key:"name",width:250,dataIndex:"name"},{title:"æ‰€å±å…¬å¸",key:"company",width:150,dataIndex:"company"},{title:"åº“å­˜ä½¿ç”¨",key:"stock",width:180},{title:"æ’åº",key:"sort_order",width:100,dataIndex:"sort_order",align:"center"},{title:"çŠ¶æ€",key:"status",width:100,align:"center"},{title:"æ“ä½œ",key:"actions",width:150,align:"center",fixed:"right"}],ze=h(()=>T.value.filter(t=>t.is_active)),K=h(()=>S.value?T.value.find(t=>t.id===S.value):null),P=h(()=>S.value?O.value.filter(t=>t.company_id===S.value):O.value),we=async()=>{try{const t=await w.get("/admin/info");N.value=t.is_super_admin,G.value=t.company_id}catch{}},he=async()=>{try{Z.value=!0;const t=await w.get("/admin/companies");T.value=t.filter(e=>e.is_active)}catch{m.error("è·å–å…¬å¸åˆ—è¡¨å¤±è´¥")}finally{Z.value=!1}},Ce=t=>{S.value=t},Y=async()=>{try{j.value=!0;const t=await w.get("/admin/prize-levels");O.value=t,await xe()}catch{m.error("è·å–å¥–é¡¹åˆ—è¡¨å¤±è´¥")}finally{j.value=!1}},xe=async()=>{try{const t=await w.get("/admin/prizes/all");C.value=t||[]}catch(t){console.error("è·å–å¥–å“åˆ—è¡¨å¤±è´¥:",t)}},Pe=()=>{M.value=null,y.value={company_id:N.value?void 0:G.value,name:"",description:"",sort_order:0,is_active:!0},I.value=!0},ie=t=>{M.value=t,y.value={company_id:t.company_id,name:t.name,description:t.description,sort_order:t.sort_order,is_active:t.is_active},I.value=!0},Le=async()=>{try{const t=je({...y.value});M.value?(await w.put(`/admin/prize-levels/${M.value.id}`,t),m.success("æ›´æ–°æˆåŠŸ")):(await w.post("/admin/prize-levels",t),m.success("æ·»åŠ æˆåŠŸ")),I.value=!1,Y()}catch{m.error("æ“ä½œå¤±è´¥")}},Se=()=>{I.value=!1},de=async t=>{try{await w.delete(`/admin/prize-levels/${t}`),m.success("åˆ é™¤æˆåŠŸ"),Y()}catch{m.error("åˆ é™¤å¤±è´¥")}},re=async t=>{U.value=t,c.value.level_id=t.id,x.value=null,await ee(t.id),D.value=!0},ee=async t=>{try{q.value=!0;const e=await w.get(`/admin/prizes/${t}`);B.value=e||[]}catch{m.error("è·å–å¥–å“åˆ—è¡¨å¤±è´¥")}finally{q.value=!1}},Ue=t=>{x.value=t,c.value={name:t.name,level_id:t.level_id,total_stock:t.total_stock||0,used_stock:t.used_stock||0}},$e=async t=>{try{await w.delete(`/admin/prizes/${t}`),m.success("åˆ é™¤å¥–å“æˆåŠŸ"),await ee(U.value.id),C.value=C.value.filter(e=>e.id!==t)}catch{m.error("åˆ é™¤å¥–å“å¤±è´¥")}},J=async()=>{try{if(!c.value.name||c.value.name.trim()===""){m.error("è¯·è¾“å…¥å¥–å“åç§°");return}const t=c.value.total_stock||0,e=c.value.used_stock||0;if(t<e){m.error(`æ€»åº“å­˜ (${t}) ä¸èƒ½å°äºå·²å‘æ”¾ (${e})`);return}let r=null;if(x.value?(r=await w.put(`/admin/prizes/${x.value.id}`,c.value),m.success("æ›´æ–°å¥–å“æˆåŠŸ")):(r=await w.post("/admin/prizes",c.value),m.success("æ·»åŠ å¥–å“æˆåŠŸ")),c.value={name:"",level_id:U.value.id,total_stock:1,used_stock:0},x.value=null,await ee(U.value.id),r){const p=C.value.findIndex(k=>k.id===r.id);p>=0?C.value[p]=r:C.value.push(r)}}catch{m.error("æ“ä½œå¤±è´¥")}},Oe=()=>{c.value={name:"",level_id:U.value.id,total_stock:1,used_stock:0},x.value=null},Ie=()=>{D.value=!1,B.value=[],U.value=null},Ve=t=>{const e=t.total_stock||0,r=t.used_stock||0,p=e-r;return e===0?"default":p===0?"error":p<e*.2?"warning":"success"},ue=t=>t?t.includes("ä¸€ç­‰")?"ğŸ¥‡":t.includes("äºŒç­‰")?"ğŸ¥ˆ":t.includes("ä¸‰ç­‰")?"ğŸ¥‰":t.includes("å‚ä¸")?"ğŸ":"ğŸ†":"ğŸ†",Ae=t=>t?t.includes("ä¸€ç­‰")?"linear-gradient(135deg, #f5222d 0%, #cf1322 100%)":t.includes("äºŒç­‰")?"linear-gradient(135deg, #faad14 0%, #d48806 100%)":t.includes("ä¸‰ç­‰")?"linear-gradient(135deg, #52c41a 0%, #389e0d 100%)":t.includes("å‚ä¸")?"linear-gradient(135deg, #1890ff 0%, #096dd9 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)":"linear-gradient(135deg, #667eea 0%, #764ba2 100%)",ce=t=>{const e=te(t);return e===0?"#f5222d":e<20?"#faad14":"#52c41a"},E=t=>{const e=C.value.filter(b=>b.level_id===t.id);if(e.length===0)return{total:t.total_stock||0,used:t.used_stock||0,remaining:(t.total_stock||0)-(t.used_stock||0)};const r=e.reduce((b,F)=>b+(F.total_stock||0),0),p=e.reduce((b,F)=>b+(F.used_stock||0),0),k=r-p;return{total:r,used:p,remaining:k}},te=t=>{const{total:e,used:r}=E(t);return e===0?0:Math.round((e-r)/e*100)},Me=h(()=>P.value.filter(t=>t.is_active).length),ve=h(()=>P.value.reduce((t,e)=>{const p=C.value.filter(k=>k.level_id===e.id).reduce((k,b)=>k+(b.total_stock||0),0);return t+p},0)),_e=h(()=>P.value.reduce((t,e)=>{const p=C.value.filter(k=>k.level_id===e.id).reduce((k,b)=>k+(b.used_stock||0),0);return t+p},0)),Ne=h(()=>ve.value-_e.value);return h(()=>O.value.filter(t=>t.is_active).length),h(()=>O.value.reduce((t,e)=>t+(e.total_stock||0),0)),h(()=>O.value.reduce((t,e)=>t+(e.used_stock||0),0)),qe(async()=>{await we(),await Y(),await he(),!N.value&&G.value&&(S.value=G.value)}),(t,e)=>{const r=_("a-button"),p=_("a-select-option"),k=_("a-select"),b=_("a-radio-button"),F=_("a-radio-group"),V=_("a-tag"),pe=_("a-progress"),se=_("a-popconfirm"),le=_("a-empty"),Be=_("a-table"),z=_("a-form-item"),Q=_("a-input"),R=_("a-input-number"),Ee=_("a-switch"),fe=_("a-alert"),ae=_("a-form"),me=_("a-modal"),Fe=_("a-space"),Te=_("a-divider"),Ge=_("a-spin");return d(),v("div",We,[s("div",Xe,[e[15]||(e[15]=s("div",{class:"header-left"},[s("h1",{class:"page-title font-display"},"ğŸ† å¥–å“ç®¡ç†"),s("p",{class:"page-subtitle font-body"},"ç®¡ç†æŠ½å¥–å¥–é¡¹å’Œåº“å­˜")],-1)),s("div",Ze,[l(r,{type:"primary",onClick:Pe,class:"add-btn neon-button"},{default:n(()=>[l(g(ge)),e[14]||(e[14]=o(" æ·»åŠ å¥–é¡¹ ",-1))]),_:1})])]),s("div",He,[s("div",Ke,[s("div",Ye,[e[17]||(e[17]=s("label",{class:"filter-label font-body"},"å…¬å¸ç­›é€‰ï¼š",-1)),l(k,{value:S.value,"onUpdate:value":e[0]||(e[0]=a=>S.value=a),placeholder:"å…¨éƒ¨å…¬å¸",style:{width:"240px"},onChange:Ce,loading:Z.value,allowClear:""},{default:n(()=>[N.value?(d(),L(p,{key:0,value:null},{default:n(()=>[...e[16]||(e[16]=[o(" å…¨éƒ¨å…¬å¸ ",-1)])]),_:1})):$("",!0),(d(!0),v(A,null,W(ze.value,a=>(d(),L(p,{key:a.id,value:a.id},{default:n(()=>[s("div",et,[s("span",tt,i(a.name),1),s("span",st,"("+i(a.code)+")",1)])]),_:2},1032,["value"]))),128))]),_:1},8,["value","loading"])]),s("div",lt,[s("span",at,[e[18]||(e[18]=o(" å…± ",-1)),s("strong",null,i(P.value.length),1),e[19]||(e[19]=o(" ä¸ªå¥–é¡¹ ",-1))]),K.value?(d(),v("span",nt,[e[20]||(e[20]=o(" æ¥è‡ª ",-1)),s("strong",{style:ke({color:K.value.theme_color||"var(--neon-cyan)"})},i(K.value.name),5)])):$("",!0)])])]),s("div",ot,[s("div",it,[e[22]||(e[22]=s("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, var(--neon-purple) 0%, #764ba2 100%)"}}," ğŸ† ",-1)),s("div",dt,[s("div",rt,i(P.value.length),1),e[21]||(e[21]=s("div",{class:"stat-label font-body"},"å¥–é¡¹æ€»æ•°",-1))])]),s("div",ut,[e[24]||(e[24]=s("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, var(--success-color) 0%, #73d13d 100%)"}}," âœ… ",-1)),s("div",ct,[s("div",vt,i(Me.value),1),e[23]||(e[23]=s("div",{class:"stat-label font-body"},"å·²å¯ç”¨",-1))])]),s("div",_t,[e[26]||(e[26]=s("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, var(--warning-color) 0%, #ffc53d 100%)"}}," ğŸ“¦ ",-1)),s("div",pt,[s("div",ft,i(ve.value),1),e[25]||(e[25]=s("div",{class:"stat-label font-body"},"æ€»åº“å­˜",-1))])]),s("div",mt,[e[28]||(e[28]=s("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, var(--neon-cyan) 0%, #1890ff 100%)"}}," âœ¨ ",-1)),s("div",yt,[s("div",kt,i(Ne.value),1),e[27]||(e[27]=s("div",{class:"stat-label font-body"},"å‰©ä½™åº“å­˜",-1))])]),s("div",gt,[e[30]||(e[30]=s("div",{class:"stat-icon",style:{background:"linear-gradient(135deg, var(--info-color) 0%, #40a9ff 100%)"}}," ğŸ ",-1)),s("div",bt,[s("div",zt,i(_e.value),1),e[29]||(e[29]=s("div",{class:"stat-label font-body"},"å·²å‘æ”¾",-1))])])]),s("div",wt,[s("div",ht,[l(F,{value:H.value,"onUpdate:value":e[1]||(e[1]=a=>H.value=a),"button-style":"solid",size:"large"},{default:n(()=>[l(b,{value:"table"},{default:n(()=>[l(g(Qe)),e[31]||(e[31]=o(" è¡¨æ ¼è§†å›¾ ",-1))]),_:1}),l(b,{value:"card"},{default:n(()=>[l(g(Re)),e[32]||(e[32]=o(" å¡ç‰‡è§†å›¾ ",-1))]),_:1})]),_:1},8,["value"])])]),H.value==="card"?(d(),v("div",Ct,[(d(!0),v(A,null,W(P.value,a=>(d(),v("div",{key:a.id,class:Je(["level-card",{"level-card--inactive":!a.is_active}])},[s("div",{class:"level-card-header",style:ke({background:Ae(a.name)})},[s("div",xt,i(ue(a.name)),1),s("div",Pt,[s("h3",Lt,i(a.name),1),s("p",St,i(a.description||"æš‚æ— æè¿°"),1)]),l(V,{color:a.is_active?"cyan":"default",class:"level-status"},{default:n(()=>[o(i(a.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["color"])],4),s("div",Ut,[s("div",$t,[s("div",Ot,[e[33]||(e[33]=s("span",{class:"level-stat-label font-body"},"åº“å­˜",-1)),s("span",It,i(E(a).remaining)+"/"+i(E(a).total),1)]),s("div",Vt,[e[34]||(e[34]=s("span",{class:"level-stat-label font-body"},"è¿›åº¦",-1)),s("div",At,[l(pe,{percent:te(a),"stroke-color":ce(a),"show-info":!1,size:"small"},null,8,["percent","stroke-color"])])])]),s("div",Mt,[a.company?(d(),L(V,{key:0,color:a.company.theme_color||"blue"},{default:n(()=>[o(i(a.company.name),1)]),_:2},1032,["color"])):(d(),v("span",Nt,"-"))]),s("div",Bt,[l(r,{type:"link",size:"small",onClick:u=>re(a)},{default:n(()=>[l(g(X)),e[35]||(e[35]=o(" ç®¡ç†å¥–å“ ",-1))]),_:1},8,["onClick"]),l(r,{type:"link",size:"small",onClick:u=>ie(a)},{default:n(()=>[l(g(ne)),e[36]||(e[36]=o(" ç¼–è¾‘ ",-1))]),_:1},8,["onClick"]),l(se,{title:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–é¡¹å—ï¼Ÿ",onConfirm:u=>de(a.id)},{default:n(()=>[l(r,{type:"link",size:"small",danger:""},{default:n(()=>[l(g(oe)),e[37]||(e[37]=o(" åˆ é™¤ ",-1))]),_:1})]),_:1},8,["onConfirm"])])])],2))),128)),P.value.length===0?(d(),L(le,{key:0,description:"æš‚æ— å¥–é¡¹æ•°æ®"})):$("",!0)])):(d(),v("div",Et,[l(Be,{columns:be,"data-source":P.value,loading:j.value,pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0},"row-key":"id","row-class-name":a=>a.is_active?"":"table-row-inactive",class:"glass-table"},{bodyCell:n(({column:a,record:u})=>[a.key==="name"?(d(),v("div",Ft,[s("span",Tt,i(ue(u.name)),1),s("div",null,[s("div",Gt,i(u.name),1),s("div",jt,i(u.description||"æš‚æ— æè¿°"),1)])])):a.key==="company"?(d(),v(A,{key:1},[u.company?(d(),L(V,{key:0,color:u.company.theme_color||"blue"},{default:n(()=>[o(i(u.company.name),1)]),_:2},1032,["color"])):(d(),v("span",Dt,"-"))],64)):a.key==="stock"?(d(),v("div",qt,[s("div",null,i(E(u).remaining)+" / "+i(E(u).total),1),l(pe,{percent:te(u),"stroke-color":ce(u),"show-info":!1,size:"small","stroke-width":4},null,8,["percent","stroke-color"])])):a.key==="status"?(d(),L(V,{key:3,color:u.is_active?"cyan":"default"},{default:n(()=>[o(i(u.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["color"])):a.key==="actions"?(d(),v(A,{key:4},[l(r,{type:"link",size:"small",onClick:ye=>re(u)},{default:n(()=>[l(g(X)),e[38]||(e[38]=o(" ç®¡ç†å¥–å“ ",-1))]),_:1},8,["onClick"]),l(r,{type:"link",size:"small",onClick:ye=>ie(u)},{default:n(()=>[l(g(ne)),e[39]||(e[39]=o(" ç¼–è¾‘ ",-1))]),_:1},8,["onClick"]),l(se,{title:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–é¡¹å—ï¼Ÿ",onConfirm:ye=>de(u.id)},{default:n(()=>[l(r,{type:"link",size:"small",danger:""},{default:n(()=>[l(g(oe)),e[40]||(e[40]=o(" åˆ é™¤ ",-1))]),_:1})]),_:1},8,["onConfirm"])],64)):$("",!0)]),_:1},8,["data-source","loading","row-class-name"]),P.value.length===0&&!j.value?(d(),L(le,{key:0,description:"æš‚æ— å¥–é¡¹æ•°æ®"})):$("",!0)])),l(me,{open:I.value,"onUpdate:open":e[7]||(e[7]=a=>I.value=a),title:M.value?"ç¼–è¾‘å¥–é¡¹":"æ·»åŠ å¥–é¡¹",maskClosable:!1,onOk:Le,onCancel:Se},{default:n(()=>[l(ae,{model:y.value,layout:"vertical"},{default:n(()=>[N.value?(d(),L(z,{key:0,label:"æ‰€å±å…¬å¸"},{extra:n(()=>[...e[41]||(e[41]=[s("div",{style:{color:"#ffffff","font-size":"12px","margin-top":"4px"}}," ğŸ’¡ æ™®é€šç®¡ç†å‘˜åªèƒ½ä¸ºæœ¬å…¬å¸åˆ›å»ºå¥–é¡¹ ",-1)])]),default:n(()=>[l(k,{value:y.value.company_id,"onUpdate:value":e[2]||(e[2]=a=>y.value.company_id=a),placeholder:"è¯·é€‰æ‹©å…¬å¸",style:{width:"100%"}},{default:n(()=>[(d(!0),v(A,null,W(T.value,a=>(d(),L(p,{key:a.id,value:a.id},{default:n(()=>[o(i(a.name)+" ("+i(a.code)+") ",1)]),_:2},1032,["value"]))),128))]),_:1},8,["value"])]),_:1})):$("",!0),l(z,null,{default:n(()=>[e[42]||(e[42]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ†"),o(" å¥–é¡¹åç§° ")],-1)),l(Q,{value:y.value.name,"onUpdate:value":e[3]||(e[3]=a=>y.value.name=a),placeholder:"å¦‚ï¼šä¸€ç­‰å¥–",class:"neon-input"},null,8,["value"])]),_:1}),l(z,null,{default:n(()=>[e[43]||(e[43]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ“"),o(" æè¿° ")],-1)),l(Q,{value:y.value.description,"onUpdate:value":e[4]||(e[4]=a=>y.value.description=a),placeholder:"å¥–é¡¹æè¿°",class:"neon-input"},null,8,["value"])]),_:1}),l(z,null,{default:n(()=>[e[44]||(e[44]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ”¢"),o(" æ’åº ")],-1)),l(R,{value:y.value.sort_order,"onUpdate:value":e[5]||(e[5]=a=>y.value.sort_order=a),min:0,style:{width:"100%"},class:"neon-input"},null,8,["value"])]),_:1}),l(z,{label:"çŠ¶æ€"},{default:n(()=>[l(Ee,{checked:y.value.is_active,"onUpdate:checked":e[6]||(e[6]=a=>y.value.is_active=a),"checked-children":"å¯ç”¨","un-checked-children":"ç¦ç”¨"},null,8,["checked"])]),_:1}),l(fe,{message:"ğŸ’¡ åº“å­˜ç®¡ç†æç¤º",description:"å¥–é¡¹çš„åº“å­˜ç”±å…¶åŒ…å«çš„æ‰€æœ‰å¥–å“å†³å®šã€‚è¯·åœ¨æ·»åŠ è¯¥å¥–é¡¹åï¼Œç‚¹å‡»'ç®¡ç†å¥–å“'æŒ‰é’®ä¸ºè¯¥å¥–é¡¹æ·»åŠ å¥–å“å¹¶è®¾ç½®æ¯ä¸ªå¥–å“çš„åº“å­˜æ•°é‡ã€‚",type:"info","show-icon":"",closable:"",style:{"margin-bottom":"16px"}})]),_:1},8,["model"])]),_:1},8,["open","title"]),l(me,{open:D.value,"onUpdate:open":e[13]||(e[13]=a=>D.value=a),title:"ç®¡ç†å¥–å“",width:"800px",footer:null,onCancel:Ie},{title:n(()=>[s("div",Jt,[l(g(X),{style:{"font-size":"20px"}}),s("span",null,i(U.value?`å¥–å“åˆ—è¡¨ - ${U.value.name}`:"å¥–å“åˆ—è¡¨"),1)])]),default:n(()=>[l(Ge,{spinning:q.value},{default:n(()=>[s("div",Qt,[s("div",Rt,[s("span",Wt,"å…± "+i(B.value.length)+" ä¸ªå¥–å“",1)]),B.value.length===0&&!q.value?(d(),v("div",Xt,[l(le,{description:"æš‚æ— å¥–å“ï¼Œåœ¨ä¸‹æ–¹æ·»åŠ "})])):(d(),v("div",Zt,[(d(!0),v(A,null,W(B.value,a=>(d(),v("div",{key:a.id,class:"prize-item"},[x.value&&x.value.id===a.id?(d(),v("div",Ht,[l(ae,{layout:"inline",style:{width:"100%"}},{default:n(()=>[l(z,{style:{flex:"2","margin-bottom":"0"}},{default:n(()=>[e[45]||(e[45]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ"),o(" å¥–å“åç§° ")],-1)),l(Q,{value:c.value.name,"onUpdate:value":e[8]||(e[8]=u=>c.value.name=u),placeholder:"å¥–å“åç§°",onPressEnter:J,class:"neon-input"},null,8,["value"])]),_:1}),l(z,{label:"æ€»åº“å­˜",style:{"margin-bottom":"0"}},{default:n(()=>[l(R,{value:c.value.total_stock,"onUpdate:value":e[9]||(e[9]=u=>c.value.total_stock=u),min:c.value.used_stock||0,max:9999,style:{width:"100px"},class:"neon-input"},null,8,["value","min"])]),_:1}),l(z,{label:"å·²å‘æ”¾",style:{"margin-bottom":"0"}},{default:n(()=>[l(R,{value:c.value.used_stock,"onUpdate:value":e[10]||(e[10]=u=>c.value.used_stock=u),min:0,max:c.value.total_stock||9999,style:{width:"100px"},class:"neon-input"},null,8,["value","max"])]),_:1}),l(z,{style:{"margin-bottom":"0"}},{default:n(()=>[l(V,{color:"blue"},{default:n(()=>[o(" å‰©ä½™: "+i((c.value.total_stock||0)-(c.value.used_stock||0)),1)]),_:1})]),_:1}),l(Fe,null,{default:n(()=>[l(r,{type:"primary",size:"small",onClick:J},{default:n(()=>[...e[46]||(e[46]=[o(" ä¿å­˜ ",-1)])]),_:1}),l(r,{size:"small",onClick:Oe},{default:n(()=>[...e[47]||(e[47]=[o(" å–æ¶ˆ ",-1)])]),_:1})]),_:1})]),_:1})])):(d(),v("div",Kt,[s("div",Yt,[s("div",es,[l(g(X),{style:{"margin-right":"8px"}}),o(" "+i(a.name),1)]),s("div",ts,[l(V,{color:Ve(a)},{default:n(()=>[o(" åº“å­˜: "+i((a.total_stock||0)-(a.used_stock||0))+"/"+i(a.total_stock||0),1)]),_:2},1032,["color"])])]),s("div",ss,[l(r,{type:"link",size:"small",onClick:u=>Ue(a)},{default:n(()=>[l(g(ne)),e[48]||(e[48]=o(" ç¼–è¾‘ ",-1))]),_:1},8,["onClick"]),l(se,{title:"ç¡®å®šè¦åˆ é™¤è¿™ä¸ªå¥–å“å—ï¼Ÿ",onConfirm:u=>$e(a.id)},{default:n(()=>[l(r,{type:"link",size:"small",danger:""},{default:n(()=>[l(g(oe)),e[49]||(e[49]=o(" åˆ é™¤ ",-1))]),_:1})]),_:1},8,["onConfirm"])])]))]))),128))])),x.value?$("",!0):(d(),v("div",ls,[l(Te,null,{default:n(()=>[...e[50]||(e[50]=[o("æ·»åŠ æ–°å¥–å“",-1)])]),_:1}),l(fe,{message:"ğŸ’¡ æ·»åŠ å¥–å“",description:"è®¾ç½®å¥–å“çš„æ€»åº“å­˜æ•°é‡ã€‚æ–°æ·»åŠ çš„å¥–å“åˆå§‹å·²å‘æ”¾æ•°é‡ä¸º 0ã€‚",type:"info","show-icon":"",closable:"",style:{"margin-bottom":"12px"}}),l(ae,{layout:"inline",style:{width:"100%"}},{default:n(()=>[l(z,{style:{flex:"2","margin-bottom":"0"}},{default:n(()=>[e[51]||(e[51]=s("label",{class:"form-label font-body"},[s("span",{class:"label-icon"},"ğŸ"),o(" å¥–å“åç§° ")],-1)),l(Q,{value:c.value.name,"onUpdate:value":e[11]||(e[11]=a=>c.value.name=a),placeholder:"è¾“å…¥å¥–å“åç§°",onPressEnter:J,class:"neon-input"},null,8,["value"])]),_:1}),l(z,{label:"æ€»åº“å­˜",style:{"margin-bottom":"0"}},{default:n(()=>[l(R,{value:c.value.total_stock,"onUpdate:value":e[12]||(e[12]=a=>c.value.total_stock=a),min:0,max:9999,placeholder:"æ€»åº“å­˜",style:{width:"120px"},class:"neon-input"},null,8,["value"])]),_:1}),l(r,{type:"primary",onClick:J},{default:n(()=>[l(g(ge)),e[52]||(e[52]=o(" æ·»åŠ  ",-1))]),_:1})]),_:1})]))])]),_:1},8,["spinning"])]),_:1},8,["open"])])}}},fs=De(as,[["__scopeId","data-v-dc3ffcd9"]]);export{fs as default};
